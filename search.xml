<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>centOS使用yum安装node、npm</title>
    <url>/2018/10/08/centOS%E4%BD%BF%E7%94%A8yuman%E5%AE%89%E8%A3%85node%E3%80%81npm/</url>
    <content><![CDATA[<h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl --silent --location https://rpm.nodesource.com/setup_8.x | sudo bash -</span><br><span class="line"></span><br><span class="line">// 或者</span><br><span class="line"></span><br><span class="line">curl --silent --location https://rpm.nodesource.com/setup_10.x | sudo bash -</span><br></pre></td></tr></table></figure>

<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo yum -y install nodejs</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可选：： 安装构建工具</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo yum install gcc-c++ make</span><br><span class="line"># or: sudo yum groupinstall &#x27;Development Tools&#x27;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>linux</tag>
        <tag>centOS</tag>
      </tags>
  </entry>
  <entry>
    <title>centOS 安装 nginx</title>
    <url>/2018/10/08/centOS%E5%AE%89%E8%A3%85nginx/</url>
    <content><![CDATA[<p>系统版本：centOS7.4</p>
<h1 id="nginx安装"><a href="#nginx安装" class="headerlink" title="nginx安装"></a>nginx安装</h1><h2 id="1、-判断有无Nginx的源"><a href="#1、-判断有无Nginx的源" class="headerlink" title="1、 判断有无Nginx的源"></a>1、 判断有无Nginx的源</h2> <figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yum search nginx</span><br></pre></td></tr></table></figure>
<p>无源：先安装源</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</span><br></pre></td></tr></table></figure>

<h2 id="2、-安装nginx"><a href="#2、-安装nginx" class="headerlink" title="2、 安装nginx"></a>2、 安装nginx</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo yum install -y nginx</span><br></pre></td></tr></table></figure>

<h2 id="3、-启动、停止、重启-nginx"><a href="#3、-启动、停止、重启-nginx" class="headerlink" title="3、 启动、停止、重启 nginx"></a>3、 启动、停止、重启 nginx</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//  启动</span><br><span class="line">systemctl start nginx.service</span><br><span class="line">//  停止</span><br><span class="line">systemctl stop nginx.service</span><br><span class="line">//  重启</span><br><span class="line">service nginx restart</span><br></pre></td></tr></table></figure>

<p><a href="https://www.jianshu.com/p/42476846cd8a">nginx开机启动配置</a></p>
]]></content>
      <tags>
        <tag>linux</tag>
        <tag>centOS</tag>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>contOS 开机启动 node 项目</title>
    <url>/2018/09/17/contOS%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8node%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<h3 id="1-安装pm2"><a href="#1-安装pm2" class="headerlink" title="1.安装pm2"></a>1.安装pm2</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo npm install pm2 -g</span><br></pre></td></tr></table></figure>


<h3 id="2-开机启动"><a href="#2-开机启动" class="headerlink" title="2.开机启动"></a>2.开机启动</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pm2 start /api/server.js --name=&quot;nodeServer&quot;</span><br></pre></td></tr></table></figure>

<h3 id="3-将pm2设置为开机启动"><a href="#3-将pm2设置为开机启动" class="headerlink" title="3.将pm2设置为开机启动"></a>3.将pm2设置为开机启动</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pm2 startup</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>linux</tag>
        <tag>centOS</tag>
      </tags>
  </entry>
  <entry>
    <title>git 常用配置</title>
    <url>/2023/01/09/git%20%E5%B8%B8%E7%94%A8%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>查看配置</p>
<ul>
<li>local仓库级别</li>
<li>global用户级别: 当前用户在所有仓库都用这个配置</li>
<li>system系统级别: 整台计算机都用这个配置</li>
</ul>
<p>优先级： <code>git config --local</code> &gt; <code>git config --global</code> &gt; <code>git config --system</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --list</span><br><span class="line">git config --global</span><br><span class="line">git config --system</span><br></pre></td></tr></table></figure>

<h1 id="配置账号邮箱"><a href="#配置账号邮箱" class="headerlink" title="配置账号邮箱"></a>配置账号邮箱</h1><p>查看</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 查看当前项目</span><br><span class="line">git config user.name</span><br><span class="line">git config user.email</span><br></pre></td></tr></table></figure>
<p>修改</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config user.name &quot;your name&quot;</span><br><span class="line">git config user.email &quot;your email&quot;</span><br></pre></td></tr></table></figure>

<h1 id="忽略文件夹名称大小写"><a href="#忽略文件夹名称大小写" class="headerlink" title="忽略文件夹名称大小写"></a>忽略文件夹名称大小写</h1><ul>
<li>默认忽略文件夹大小写</li>
</ul>
<p>查看当前配置配置</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --get core.ignorecase</span><br></pre></td></tr></table></figure>
<p>修改</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 不忽略</span><br><span class="line">git config core.ignorecase false</span><br><span class="line">// 忽略</span><br><span class="line">git config core.ignorecase true</span><br></pre></td></tr></table></figure>

<p>ssh</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;邮箱&quot;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>css 单行、多行溢出用省略号</title>
    <url>/2022/12/25/css%E5%8D%95%E8%A1%8C%E3%80%81%E5%A4%9A%E8%A1%8C%E6%BA%A2%E5%87%BA%E7%94%A8%E7%9C%81%E7%95%A5%E5%8F%B7/</url>
    <content><![CDATA[<h1 id="单行"><a href="#单行" class="headerlink" title="单行"></a>单行</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">overflow: hidden;</span><br><span class="line">text-overflow: ellipsis;</span><br><span class="line">white-space: nowrap;</span><br></pre></td></tr></table></figure>

<br />

<h1 id="多行"><a href="#多行" class="headerlink" title="多行"></a>多行</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">overflow : hidden;</span><br><span class="line">text-overflow: ellipsis;</span><br><span class="line">display: -webkit-box;</span><br><span class="line">-webkit-line-clamp: 2;</span><br><span class="line">-webkit-box-orient: vertical;</span><br></pre></td></tr></table></figure>

<br />

<h1 id="多行不生效"><a href="#多行不生效" class="headerlink" title="多行不生效"></a>多行不生效</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">overflow: hidden;</span><br><span class="line"> text-overflow: ellipsis;</span><br><span class="line"> display: -webkit-box;</span><br><span class="line"> /*! autoprefixer: off */</span><br><span class="line"> -webkit-box-orient: vertical;</span><br><span class="line"> /* autoprefixer: on */</span><br><span class="line"> -webkit-line-clamp: 3;</span><br></pre></td></tr></table></figure>
<p>打包时，警告</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Emitted value instead of an instance of Error) autoprefixer: \static\css\reset\index.css:99:3: Second Autoprefixer control comment was ignored. Autoprefixer applies control comment to whole block, not to next rules.</span><br></pre></td></tr></table></figure>
<p>解决办法</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/*! autoprefixer: ignore next */</span><br><span class="line">-webkit-box-orient: vertical;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>git 常用命令</title>
    <url>/2019/08/16/git%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h1 id="创建并切换分支"><a href="#创建并切换分支" class="headerlink" title="创建并切换分支"></a>创建并切换分支</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git checkout -b dev</span><br></pre></td></tr></table></figure>

<h1 id="查看所有远程仓库"><a href="#查看所有远程仓库" class="headerlink" title="查看所有远程仓库"></a>查看所有远程仓库</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git remote show</span><br></pre></td></tr></table></figure>

<h1 id="撤销commit但未push的命令"><a href="#撤销commit但未push的命令" class="headerlink" title="撤销commit但未push的命令"></a>撤销commit但未push的命令</h1><h2 id="1-找到想要撤销的id"><a href="#1-找到想要撤销的id" class="headerlink" title="1.找到想要撤销的id"></a>1.找到想要撤销的id</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git log</span><br></pre></td></tr></table></figure>
<h2 id="2-撤销commit"><a href="#2-撤销commit" class="headerlink" title="2.撤销commit"></a>2.撤销commit</h2><blockquote>
<p>撤销,同时将代码恢复到前一commit_id 对应的版本</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git reset –hard id </span><br></pre></td></tr></table></figure>

<blockquote>
<p>撤销，但是不对代码修改</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git reset HEAD^</span><br></pre></td></tr></table></figure>

<h1 id="克隆"><a href="#克隆" class="headerlink" title="克隆"></a>克隆</h1><h2 id="克隆指定分支"><a href="#克隆指定分支" class="headerlink" title="克隆指定分支"></a>克隆指定分支</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone -b &lt;仓库地址&gt;</span><br></pre></td></tr></table></figure>
<h2 id="克隆重命名项目"><a href="#克隆重命名项目" class="headerlink" title="克隆重命名项目"></a>克隆重命名项目</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone &lt;仓库地址&gt; &lt;重命名项目名&gt;</span><br></pre></td></tr></table></figure>

<h1 id="修改远程仓库"><a href="#修改远程仓库" class="headerlink" title="修改远程仓库"></a>修改远程仓库</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git remote set-url origin xxx</span><br></pre></td></tr></table></figure>
<h1 id="查看远程仓库地址"><a href="#查看远程仓库地址" class="headerlink" title="查看远程仓库地址"></a>查看远程仓库地址</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure>

<h1 id="标签"><a href="#标签" class="headerlink" title="标签"></a>标签</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 查看标签</span><br><span class="line">git tag</span><br><span class="line">git show 标签名 // 查看标签的信息</span><br><span class="line"></span><br><span class="line">// 创建标签</span><br><span class="line">git tag 标签名  // 当前内容</span><br><span class="line">git tag 标签名 007a52f // 对之前内容打标签 007a52f 为commit id</span><br><span class="line">git tag -a 标签名 -m &quot;标签说明&quot; [commit id] // 创建带说明的标签</span><br><span class="line"></span><br><span class="line">// 删除</span><br><span class="line">git tag -d 标签名 // 删除本地</span><br><span class="line">git push origin -d 标签名 // 删除远程</span><br><span class="line"></span><br><span class="line">// 推送</span><br><span class="line">git push origin --tags // 将所有不再远程仓库中的标签上传</span><br><span class="line">git push origin 标签名 // 将指定标签推送</span><br></pre></td></tr></table></figure>

<h1 id="子项目"><a href="#子项目" class="headerlink" title="子项目"></a>子项目</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git submodule init</span><br><span class="line">git submodule update</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>js base64toFile</title>
    <url>/2019/12/04/js%20base64toFile/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将以base64数据转换为File</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> urlData base64数据</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> filename 生成文件的文件名</span></span><br><span class="line"><span class="comment"> * 用url方式表示的base64图片数据</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">dataURLtoFile</span> (dataurl, filename) &#123;</span><br><span class="line">  <span class="keyword">const</span> arr = dataurl.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>)</span><br><span class="line">  <span class="keyword">const</span> mime = arr[<span class="number">0</span>].<span class="title function_">match</span>(<span class="regexp">/:(.*?);/</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">const</span> bstr = <span class="title function_">atob</span>(arr[<span class="number">1</span>])</span><br><span class="line">  <span class="keyword">let</span> n = bstr.<span class="property">length</span></span><br><span class="line">  <span class="keyword">let</span> u8arr = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(n)</span><br><span class="line">  <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">    u8arr[n] = bstr.<span class="title function_">charCodeAt</span>(n)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">File</span>([u8arr], filename, &#123; <span class="attr">type</span>: mime &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js onShow/onHide</title>
    <url>/2022/12/26/js%20onShow%E4%B8%8EonHide/</url>
    <content><![CDATA[<h1 id="js-原生"><a href="#js-原生" class="headerlink" title="js 原生"></a>js 原生</h1><h2 id="visibilitychange-事件"><a href="#visibilitychange-事件" class="headerlink" title="visibilitychange 事件"></a>visibilitychange 事件</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;visibilitychange&quot;</span>, <span class="keyword">function</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="comment">// document.visibilityState === &#x27;visible&#x27; // 显示</span></span><br><span class="line">  <span class="comment">// document.visibilityState === &#x27;hidden&#x27; // 隐藏</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="property">visibilityState</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//或者</span></span><br><span class="line">  </span><br><span class="line">  <span class="comment">// document.hidden === true // 隐藏</span></span><br><span class="line">  <span class="comment">// document.hidden === false // 显示</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">document</span>.<span class="property">hidden</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="pageshow-x2F-pagehide-事件"><a href="#pageshow-x2F-pagehide-事件" class="headerlink" title="pageshow&#x2F;pagehide 事件"></a>pageshow&#x2F;pagehide 事件</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pageshow&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">log</span>(<span class="string">&#x27;pageshow: 页面显示&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pagehide&#x27;</span>, <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">    <span class="title function_">log</span>(<span class="string">&#x27;pagehide: 页面隐藏&#x27;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="visibilitychange-与-pageshow-x2F-pagehide-的区别"><a href="#visibilitychange-与-pageshow-x2F-pagehide-的区别" class="headerlink" title="visibilitychange 与 pageshow&#x2F;pagehide 的区别"></a>visibilitychange 与 pageshow&#x2F;pagehide 的区别</h2><h3 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h3><p>虽然都是有显示与隐藏的含义，但是 visibilitychange 指的是页面的可见与不可见，pageshow&#x2F;pagehide 指的是页面的进入与离开。</p>
<p>触发时机：</p>
<blockquote>
<p>页面加载与刷新：pageshow</p>
<p>选项卡切换：visibilitychange</p>
<p>前进和后退：依次触发 pagehide，visibilitychange 和 pageshow</p>
</blockquote>
<ul>
<li>Safari浏览器不触发 visibilitychange</li>
</ul>
<h3 id="注册方式"><a href="#注册方式" class="headerlink" title="注册方式"></a>注册方式</h3><p>visibilitychange 事件通常都是挂载在 document 对象上，然现在最新的浏览器也支持挂载在 window 对象上，不过由于 Safari 14 之前的版本不支持</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;visibilitychange&#x27;</span>, <span class="function">() =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>
<p>pageshow 和 pagehide 事件都是通过 window 对象进行注册的</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pageshow&#x27;</span>, <span class="function">()=&gt;</span> &#123;&#125;);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;pagehide&#x27;</span>, <span class="function">()=&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="兼容"><a href="#兼容" class="headerlink" title="兼容"></a>兼容</h3><p>pageshow 和 pagehide 事件是 IE11 及其以上浏览器支持的，</p>
<p>而 visibilitychange 事件是 IE10 及其以上版本支持的</p>
<h1 id="插件与工具"><a href="#插件与工具" class="headerlink" title="插件与工具"></a>插件与工具</h1><h2 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h2><p><a href="https://github.com/Yuliang-Lee/vue-visibility-change">vue-visibility-change</a></p>
<h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i vue-visibility-change -S</span><br></pre></td></tr></table></figure>

<h3 id="引入"><a href="#引入" class="headerlink" title="引入"></a>引入</h3><p>main.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> visibility <span class="keyword">from</span> <span class="string">&#x27;vue-visibility-change&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Vue</span>.<span class="title function_">use</span>(visibility);</span><br></pre></td></tr></table></figure>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><h4 id="全局"><a href="#全局" class="headerlink" title="全局"></a>全局</h4><p>main.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">visibility.<span class="title function_">change</span>(<span class="function">(<span class="params">evt, hidden</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;global callback: &#x27;</span> + hidden);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h4 id="局部"><a href="#局部" class="headerlink" title="局部"></a>局部</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div v-visibility-change=&quot;change&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods:&#123;</span><br><span class="line">    change(evt, hidden) &#123;</span><br><span class="line">      //hidden为false的时候，表示从别的页面切换回当前页面</span><br><span class="line">      //hidden为true的时候，表示从当前页面切换到别的页面</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="PageLifecycle-js"><a href="#PageLifecycle-js" class="headerlink" title="PageLifecycle.js"></a>PageLifecycle.js</h2><p>深入了解请查看：</p>
<p><a href="https://github.com/GoogleChromeLabs/page-lifecycle">PageLifecycle.js</a></p>
<p><a href="https://developer.chrome.com/blog/page-lifecycle-api/">google 官方的文章</a></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./lifecycle.es5.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">lifecycle.<span class="title function_">addEventListener</span>(<span class="string">&#x27;statechange&#x27;</span>, <span class="keyword">function</span>(<span class="params">event</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;状态变化：&#x27;</span> + event.<span class="property">oldState</span> + <span class="string">&#x27; → &#x27;</span> + event.<span class="property">newState</span>);</span></span><br><span class="line"><span class="language-javascript">&#125;);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="补充"><a href="#补充" class="headerlink" title="补充"></a>补充</h1><h2 id="页面的生命周期"><a href="#页面的生命周期" class="headerlink" title="页面的生命周期"></a>页面的生命周期</h2><ul>
<li>ACTIVE 激活</li>
<li>PASSIVE 未激活（页面可以看到，但焦点不在此页面，打开开发者工具可以触发此状态）</li>
<li>HIDDEN 隐藏，最小化、标签页切换都属于隐藏</li>
<li>FROZEN 冻结 </li>
<li>TERMINATED 结束 （页面被关闭）</li>
<li>DISCARDED 废弃（页面内容被浏览器清空）</li>
</ul>
<p>从 HIDDEN 状态到 FROZEN 状态之间的变化是有新的 API 事件名称检测的，分别是 resume 事件和 freeze 事件，使用示意如下：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;freeze&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 页面被冻结</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;resume&#x27;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 页面解冻了</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 全部数组方法</title>
    <url>/2022/12/25/js%20%E5%85%A8%E9%83%A8%E6%95%B0%E7%BB%84%E6%96%B9%E6%B3%95/</url>
    <content><![CDATA[<h1 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h1><h2 id="方法一：new-Array"><a href="#方法一：new-Array" class="headerlink" title="方法一：new Array"></a>方法一：new Array</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 创建数组</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一个数值参数，创建一个初始长度为指定数值的空数组</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(<span class="number">20</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果传入一个非数值的参数或者参数个数大于 1，则表示创建一个包含指定元素的数组。</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&#x27;20&#x27;</span>);                  <span class="comment">// [&#x27;20&#x27;] </span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Array</span>(<span class="string">&quot;lily&quot;</span>,<span class="string">&quot;lucy&quot;</span>,<span class="string">&quot;Tom&quot;</span>);   <span class="comment">// [&#x27;lily&#x27;, &#x27;lucy&#x27;, &#x27;Tom&#x27;]</span></span><br></pre></td></tr></table></figure>
<h2 id="方法二：Array-of"><a href="#方法二：Array-of" class="headerlink" title="方法二：Array.of"></a>方法二：Array.of</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// ES6 Array.of 创建一个包含所有传入参数的数组，而不管参数的数量与类型</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">of</span>()                        <span class="comment">// []</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="number">20</span>)                      <span class="comment">// [20]</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="string">&#x27;20&#x27;</span>)                    <span class="comment">// [&#x27;20&#x27;]</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">of</span>(<span class="string">&quot;lily&quot;</span>,<span class="string">&quot;lucy&quot;</span>,<span class="string">&quot;Tom&quot;</span>)     <span class="comment">// [&#x27;lily&#x27;, &#x27;lucy&#x27;, &#x27;Tom&#x27;]</span></span><br></pre></td></tr></table></figure>
<br/>
<br/>

<h1 id="可迭代对象或者类数组对象转换成数组"><a href="#可迭代对象或者类数组对象转换成数组" class="headerlink" title="可迭代对象或者类数组对象转换成数组"></a>可迭代对象或者类数组对象转换成数组</h1><p>可遍历（iterable）的对象（包括 ES6 新增的数据结构 Set 和 Map）</p>
<p>只要是部署了 Iterator 接口的数据结构，Array.from()都能将其转为数组。</p>
<p>类数组的对象：length 属性</p>
<h2 id="方法一：Array-from"><a href="#方法一：Array-from" class="headerlink" title="方法一：Array.from"></a>方法一：Array.from</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="string">&#x27;hello&#x27;</span>) <span class="comment">// [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span></span><br><span class="line"><span class="comment">// NodeList 集合</span></span><br><span class="line"><span class="keyword">const</span> ps = <span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;p&#x27;</span>);</span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(ps)</span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments 对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> args = <span class="title class_">Array</span>.<span class="title function_">from</span>(<span class="variable language_">arguments</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(&#123; <span class="attr">length</span>: <span class="number">3</span> &#125;); <span class="comment">// [ undefined, undefined, undefined ]</span></span><br></pre></td></tr></table></figure>
<p>Array.from的第二个参数，map</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike, <span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br><span class="line"><span class="comment">// 等同于</span></span><br><span class="line"><span class="title class_">Array</span>.<span class="title function_">from</span>(arrayLike).<span class="title function_">map</span>(<span class="function"><span class="params">x</span> =&gt;</span> x * x);</span><br></pre></td></tr></table></figure>
<p>Array.from的第三个参数，绑定this</p>
<p>如果map()函数里面用到了this关键字，还可以传入Array.from()的第三个参数，用来绑定this。</p>
<h2 id="方法二：…"><a href="#方法二：…" class="headerlink" title="方法二：…"></a>方法二：…</h2><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">[...<span class="string">&#x27;hello&#x27;</span>] <span class="comment">// [&#x27;h&#x27;, &#x27;e&#x27;, &#x27;l&#x27;, &#x27;l&#x27;, &#x27;o&#x27;]</span></span><br><span class="line"><span class="comment">// NodeList对象</span></span><br><span class="line">[...<span class="variable language_">document</span>.<span class="title function_">querySelectorAll</span>(<span class="string">&#x27;div&#x27;</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// arguments对象</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">foo</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> args = [...<span class="variable language_">arguments</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br/>
<br/>

<h1 id="筛选"><a href="#筛选" class="headerlink" title="筛选"></a>筛选</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 检查数组中符合条件的所有元素。 不修改原数组， 返回符所有符合条件的元素数组</span></span><br><span class="line"><span class="title function_">filter</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 返回匹配的值，不修改原数组 ，返回通过测试的第一个元素的值或undefined</span></span><br><span class="line"><span class="title function_">find</span>(<span class="title function_">fn</span>(item, index, arr), <span class="variable language_">this</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测当前值在数组中第一次出现的位置索引，不修改原数组，返回下标或-1</span></span><br><span class="line"><span class="comment">// c1: 必须。查找的元素</span></span><br><span class="line"><span class="comment">// c2: 可选。开始检索的位置，默认0</span></span><br><span class="line"><span class="title function_">indexOf</span>(c1, c2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检测当前值在数组中最后一次出现的位置索引，不修改原数组，返回下标或-1</span></span><br><span class="line"><span class="comment">// c1: 必须。查找的元素</span></span><br><span class="line"><span class="comment">// c2: 可选。开始检索的位置，默认0</span></span><br><span class="line"><span class="title function_">lastIndexOf</span>(c1, c2)</span><br><span class="line"></span><br><span class="line"><span class="comment">// ES6 返回匹配位置的索引，不修改原数组 ，返回通过测试的第一个元素的下标或-1</span></span><br><span class="line"><span class="title function_">findIndex</span>(<span class="title function_">fn</span>(item, index, arr), <span class="variable language_">this</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断数组中每一项都是否满足条件，不修改原数组，返回true false</span></span><br><span class="line"><span class="title function_">every</span>(<span class="title function_">fn</span>(item, index, arr), <span class="variable language_">this</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//判断数组中是否存在满足条件的项，不修改原数组，返回true false</span></span><br><span class="line"><span class="title function_">some</span>(<span class="title function_">fn</span>(item, index, arr), <span class="variable language_">this</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 判断一个数组是否包含一个指定的值，不修改原数组，返回true false</span></span><br><span class="line"><span class="title function_">includes</span>(value)</span><br></pre></td></tr></table></figure>
<br/>
<br/>

<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">join()：用指定的分隔符将数组每一项拼接为字符串，不修改原数组，</span><br><span class="line"></span><br><span class="line">-------------------------------</span><br><span class="line">unshift()：向数组的开头添加一个或更多元素,修改原数组 并返回新的长度</span><br><span class="line"></span><br><span class="line">push()：向数组的末尾添加新元素，修改原数组，返回push内容</span><br><span class="line"></span><br><span class="line">pop()：删除数组的最后一项，修改原数组，返回删除内容</span><br><span class="line"></span><br><span class="line">shift()：删除数组的第一项，修改原数组，返回删除内容</span><br><span class="line"></span><br><span class="line">-------------------------------</span><br><span class="line">slice(c1, c2)：选取数组的一部分，不修改原数组，并返回一个新数组。</span><br><span class="line">    c1: 可选。起始下标，负数从数组的倒数第几个元素开始提取,</span><br><span class="line">    c2: 可选。结束的下标，默认length - 1</span><br><span class="line"></span><br><span class="line">splice(c1, c2, ...c3)：添加或删除,改变原数组,返回的被删除的元素的数组</span><br><span class="line">    c1: 必需。规定从何处添加/删除元素</span><br><span class="line">    c2: 可选。删除多少元素。必须是数字，可以是 &quot;0&quot;。 默认length - 1</span><br><span class="line">    c3: 可选。要添加到数组的新元素</span><br><span class="line"></span><br><span class="line">-------------------------------</span><br><span class="line">fill(c1, c2, c3): ES6 固定值替换数组的元素, 修改原数组, 返回修改后的数组</span><br><span class="line">    c1: 必需。要替换的值。 </span><br><span class="line">    c2: 可选。开始替换位置。</span><br><span class="line">    c3: 可选。停止填充位置 (默认为 array.length)</span><br><span class="line">    </span><br><span class="line">-------------------------------</span><br><span class="line">sort()：对数组的元素进行排序</span><br><span class="line"></span><br><span class="line">reverse()：对数组进行倒序</span><br><span class="line"></span><br><span class="line">forEach()：ES5 及以下循环遍历数组每一项</span><br><span class="line"></span><br><span class="line">map()：ES6 循环遍历数组每一项</span><br><span class="line"></span><br><span class="line">copyWithin():用于从数组的指定位置拷贝元素到数组的另一个指定位置中</span><br><span class="line"></span><br><span class="line">toLocaleString()、toString():将数组转换为字符串</span><br><span class="line"></span><br><span class="line">flat()、flatMap()：扁平化数组</span><br><span class="line"></span><br><span class="line">entries() 、keys() 、values():遍历数组</span><br><span class="line"></span><br><span class="line">concat()：用于连接两个或多个数组</span><br></pre></td></tr></table></figure>
<br/>
<br/>

<h1 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h1><p><a href="https://www.runoob.com/jsref/jsref-obj-array.html">参考文档</a></p>
]]></content>
      <tags>
        <tag>js</tag>
        <tag>es6</tag>
      </tags>
  </entry>
  <entry>
    <title>js 保留小数下取整</title>
    <url>/2023/04/12/js%20%E4%BF%9D%E7%95%99%E5%B0%8F%E6%95%B0%E4%B8%8B%E5%8F%96%E6%95%B4/</url>
    <content><![CDATA[<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">setPrice</span> = (<span class="params">price: <span class="built_in">number</span></span>) =&gt; <span class="title class_">Math</span>.<span class="title function_">floor</span>(price * <span class="number">100</span>) / <span class="number">100</span>;</span><br><span class="line"><span class="title function_">setPrice</span>(<span class="number">35.66</span>) <span class="comment">// 35.65 存在精度问题</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 保留小数（下取整）</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> n &#123;Number&#125; 要保留小数的数字</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> len &#123;Number&#125; 要保留小数的位数</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> toFixed = (<span class="attr">n</span>: <span class="built_in">number</span>, <span class="attr">len</span>: <span class="built_in">number</span>): <span class="function"><span class="params">number</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">let</span> val = <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="keyword">const</span> nStr = n + <span class="string">&quot;&quot;</span>;</span><br><span class="line">  <span class="comment">// 小数</span></span><br><span class="line">  <span class="keyword">const</span> [integer, decimal] = nStr.<span class="title function_">split</span>(<span class="string">&quot;.&quot;</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (decimal === <span class="literal">undefined</span>) val = nStr;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (decimal.<span class="property">length</span> &lt;= len) val = <span class="string">`<span class="subst">$&#123;integer&#125;</span>.<span class="subst">$&#123;decimal&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">else</span> val = <span class="string">`<span class="subst">$&#123;integer&#125;</span>.<span class="subst">$&#123;decimal.substring(<span class="number">0</span>, len)&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="title class_">Number</span>(val);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 对象与 queryString 相互转换</title>
    <url>/2022/12/30/js%20%E5%AF%B9%E8%B1%A1%E4%B8%8EqueryString%E7%9B%B8%E4%BA%92%E8%BD%AC%E6%8D%A2/</url>
    <content><![CDATA[<p>对象转queryString</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">new</span> <span class="title class_">URLSearchParams</span>(obj)).<span class="title function_">toString</span>()</span><br></pre></td></tr></table></figure>

<p>queryString 转对象</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getQueryObj</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> query = <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>.<span class="title function_">split</span>(<span class="string">&#x27;?&#x27;</span>)[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">if</span> (!query) <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">  <span class="keyword">const</span> obj = &#123;&#125;</span><br><span class="line">  query.<span class="title function_">split</span>(<span class="string">&#x27;&amp;&#x27;</span>).<span class="title function_">forEach</span>(<span class="function"><span class="params">q</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> item = q.<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line">    obj[item[<span class="number">0</span>]] = item[<span class="number">1</span>] </span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 生成文件并下载</title>
    <url>/2023/04/28/js%20%E7%94%9F%E6%88%90%E6%96%87%E4%BB%B6%E5%B9%B6%E4%B8%8B%E8%BD%BD/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">download</span>(<span class="params">filename, text</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> element = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>);</span><br><span class="line">  element.<span class="title function_">setAttribute</span>(<span class="string">&#x27;href&#x27;</span>, <span class="string">&#x27;data:text/plain;charset=utf-8,&#x27;</span> + <span class="built_in">encodeURIComponent</span>(text));</span><br><span class="line">  element.<span class="title function_">setAttribute</span>(<span class="string">&#x27;download&#x27;</span>, filename);</span><br><span class="line">  </span><br><span class="line">  element.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(element);</span><br><span class="line">  </span><br><span class="line">  element.<span class="title function_">click</span>(); </span><br><span class="line">  <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">removeChild</span>(element);</span><br><span class="line">&#125; </span><br><span class="line">  </span><br><span class="line"><span class="title function_">download</span>(<span class="string">&quot;hello.txt&quot;</span>,<span class="string">&quot;This is the content of my file :)&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 禁用视频快进与倍速</title>
    <url>/2023/04/18/js%20%E7%A6%81%E7%94%A8%E8%A7%86%E9%A2%91%E5%BF%AB%E8%BF%9B%E4%B8%8E%E5%80%8D%E9%80%9F/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">video.<span class="property">ontimeupdate</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> old = (<span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">getItem</span>(playTimeKey) * <span class="number">1</span>) || <span class="number">0</span>;</span><br><span class="line">  <span class="comment">// 进制使用倍速</span></span><br><span class="line">  <span class="keyword">const</span> &#123;playbackRate&#125; = video</span><br><span class="line">  <span class="keyword">if</span> (playbackRate !== <span class="number">1</span>) video.<span class="property">playbackRate</span> = <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> cuTime = video.<span class="property">currentTime</span>;</span><br><span class="line">  <span class="keyword">if</span> (cuTime - old &gt; <span class="number">2</span>) &#123;</span><br><span class="line">    video.<span class="property">currentTime</span> = old;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    old = cuTime;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">window</span>.<span class="property">localStorage</span>.<span class="title function_">setItem</span>(playTimeKey, old)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 视频画中画</title>
    <url>/2023/04/25/js%20%E8%A7%86%E9%A2%91%E7%94%BB%E4%B8%AD%E7%94%BB/</url>
    <content><![CDATA[]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 判断客户端是否断网</title>
    <url>/2022/12/28/js%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E6%96%AD%E7%BD%91/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (navigator.<span class="property">onLine</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;有网&quot;</span>);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;没网&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;online&quot;</span>, online, <span class="literal">false</span>);</span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;offline&quot;</span>, offline, <span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">online</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;重新连接&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">offline</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&quot;连接断开&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js手机号</title>
    <url>/2019/08/16/js%E6%89%8B%E6%9C%BA%E5%8F%B7%E8%84%B1%E6%95%8F/</url>
    <content><![CDATA[<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> telDesensitization = (<span class="attr">phone</span>: <span class="built_in">string</span>): <span class="function"><span class="params">string</span> =&gt;</span></span><br><span class="line">  phone?.<span class="property">length</span> === <span class="number">11</span> ? phone.<span class="title function_">replace</span>(<span class="regexp">/(\d&#123;3&#125;)\d*(\d&#123;4&#125;)/</span>, <span class="string">&#x27;$1****$2&#x27;</span>) : <span class="string">&#x27;&#x27;</span>;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 复制指定内容</title>
    <url>/2019/08/16/js%E5%A4%8D%E5%88%B6%E6%8C%87%E5%AE%9A%E5%86%85%E5%AE%B9/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install clipboard –save</span><br></pre></td></tr></table></figure>

<blockquote>
<p>html</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;div class=&quot;fr blue&quot; id=&quot;copy&quot; @click=&quot;copy&quot; data-clipboard-text=&quot;要复制的内容&quot;&gt;</span><br><span class="line">    点击复制微信号:&#123;&#123;d.busWechat&#125;&#125;</span><br><span class="line">/div&gt;   </span><br></pre></td></tr></table></figure>

<blockquote>
<p>js</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Clipboard from &#x27;clipboard&#x27;</span><br><span class="line">new ClipboardJS(&#x27;#copy&#x27;);</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 时间戳转日期</title>
    <url>/2019/08/16/js%E6%97%B6%E9%97%B4%E6%88%B3%E8%BD%AC%E6%97%A5%E6%9C%9F/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">(<span class="keyword">new</span> <span class="title class_">Date</span>(<span class="number">1565835493922</span> + <span class="number">8</span> * <span class="number">3600</span> * <span class="number">1000</span>).<span class="title function_">toJSON</span>().<span class="title function_">substr</span>(<span class="number">0</span>, <span class="number">19</span>).<span class="title function_">replace</span>(<span class="string">&#x27;T&#x27;</span>, <span class="string">&#x27; &#x27;</span>).<span class="title function_">replace</span>(<span class="regexp">/-/g</span>, <span class="string">&#x27;.&#x27;</span>))</span><br><span class="line"><span class="comment">//  yyyy.MM.dd HH:mm:ss</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 注释规范</title>
    <url>/2023/01/28/js%E6%B3%A8%E9%87%8A/</url>
    <content><![CDATA[<h2 id="param"><a href="#param" class="headerlink" title="@param"></a>@param</h2><p>标记提供函数参数的名称、类型和描述</p>
<h3 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h3><ul>
<li>@arg</li>
<li>@argument</li>
</ul>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><p>@param [<type>] <name> [<description>]</p>
<h3 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">string</span>&#125; somebody Somebody&#x27;s name.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">somebody</span>) &#123;</span><br><span class="line">  <span class="title function_">alert</span>(<span class="string">&#x27;Hello &#x27;</span> + somebody);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="description"><a href="#description" class="headerlink" title="@description"></a>@description</h2><p>标记允许提供正在记录一般说明</p>
<h3 id="别名-1"><a href="#别名-1" class="headerlink" title="别名"></a>别名</h3><ul>
<li>@desc</li>
</ul>
<h3 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h3><p>@description <some description></p>
<h3 id="示例-1"><a href="#示例-1" class="headerlink" title="示例"></a>示例</h3><p>如果在注释开始的地方添加描述</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Add two numbers.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过使用 @description 标签添加的描述可放在任意地方</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">a</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">b</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@description</span> Add two numbers.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">add</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="returns"><a href="#returns" class="headerlink" title="@returns"></a>@returns</h2><p>标记记录函数返回的值</p>
<h3 id="别名-2"><a href="#别名-2" class="headerlink" title="别名"></a>别名</h3><ul>
<li>@return</li>
</ul>
<h3 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h3><p>@return [{type}] [description]</p>
<h3 id="示例-2"><a href="#示例-2" class="headerlink" title="示例"></a>示例</h3><p>返回值的类型:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the sum of a and b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">a</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">b</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">number</span>&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>返回值的类型和描述:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the sum of a and b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">a</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">b</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">number</span>&#125; Sum of a and b</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回多类型的值:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the sum of a and b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">a</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">b</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">boolean</span>&#125; retArr If set to true, the function will return an array</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">(number|Array)</span>&#125; Sum of a and b or an array that contains a, b and the sum of a and b.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sum</span>(<span class="params">a, b, retArr</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span> (retArr) &#123;</span><br><span class="line">    <span class="keyword">return</span> [a, b, a + b];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> a + b;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>返回 Promise:</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Returns the sum of a and b</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">a</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> &#123;<span class="type">number</span>&#125; <span class="variable">b</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns</span> &#123;<span class="type">Promise</span>&#125; Promise object represents the sum of a and b</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">sumAsync</span>(<span class="params">a, b</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="keyword">function</span>(<span class="params">resolve, reject</span>) &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(a + b);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="class"><a href="#class" class="headerlink" title="@class"></a>@class</h2><p>将函数标记为构造函数</p>
<h3 id="别名-3"><a href="#别名-3" class="headerlink" title="别名"></a>别名</h3><ul>
<li>@constructor</li>
</ul>
<h3 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h3><p>@class [<type> <name>]</p>
<h3 id="示例-3"><a href="#示例-3" class="headerlink" title="示例"></a>示例</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Creates a new Person.</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@class</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Person</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> p = <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br></pre></td></tr></table></figure>

<h2 id="deprecated"><a href="#deprecated" class="headerlink" title="@deprecated"></a>@deprecated</h2><p>标签指明一个标识在代码中已经被弃用。</p>
<h3 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h3><p>@deprecated [<some text>]</p>
<h3 id="示例-4"><a href="#示例-4" class="headerlink" title="示例"></a>示例</h3><p>可以单独使用的 @deprecated 标签，或包括一些文本，来详细说明为什么要弃用。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@deprecated</span> since version 2.0</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">old</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="link"><a href="#link" class="headerlink" title="@link"></a>@link</h2><p>内联标记创建指向指定的 namepath 或 URL 的链接</p>
<h3 id="别名-4"><a href="#别名-4" class="headerlink" title="别名"></a>别名</h3><ul>
<li>@linkcode</li>
<li>@linkplain</li>
</ul>
<h3 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h3><p>{@link namepathOrURL}</p>
<p>[link text]{@link namepathOrURL}</p>
<p>{@link namepathOrURL|link text}</p>
<p>{@link namepathOrURL link text (after the first space)}</p>
<h3 id="示例-5"><a href="#示例-5" class="headerlink" title="示例"></a>示例</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * See &#123;<span class="doctag">@link</span> MyClass&#125; and [MyClass&#x27;s foo property]&#123;<span class="doctag">@link</span> MyClass#foo&#125;.</span></span><br><span class="line"><span class="comment"> * Also, check out &#123;<span class="doctag">@link</span> http://www.google.com|Google&#125; and</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> https://github.com GitHub&#125;.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">myFunction</span>(<span class="params"></span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="文档"><a href="#文档" class="headerlink" title="文档"></a>文档</h2><p><a href="https://www.jsdoc.com.cn/">JSDoc 文档</a></p>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>js 身份证校验</title>
    <url>/2019/08/16/js%E8%BA%AB%E4%BB%BD%E8%AF%81%E9%AA%8C%E8%AF%81/</url>
    <content><![CDATA[<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="title class_">Wi</span> = [<span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">6</span>, <span class="number">3</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">10</span>, <span class="number">5</span>, <span class="number">8</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>]    <span class="comment">// 加权因子</span></span><br><span class="line"><span class="keyword">let</span> letideCode = [<span class="number">1</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">9</span>, <span class="number">8</span>, <span class="number">7</span>, <span class="number">6</span>, <span class="number">5</span>, <span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>]            <span class="comment">// 身份证验证位值.10代表X</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">IdCardletidate</span> (idCard) &#123;</span><br><span class="line">  idCard = <span class="title function_">trim</span>(idCard.<span class="title function_">replace</span>(<span class="regexp">/ /g</span>, <span class="string">&#x27;&#x27;</span>))               <span class="comment">// 去掉字符串头尾空格</span></span><br><span class="line">  <span class="keyword">if</span> (idCard.<span class="property">length</span> === <span class="number">15</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">isletidityBrithBy15IdCard</span>(idCard)       <span class="comment">// 进行15位身份证的验证</span></span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (idCard.<span class="property">length</span> === <span class="number">18</span>) &#123;</span><br><span class="line">    <span class="keyword">let</span> aIdCard = idCard.<span class="title function_">split</span>(<span class="string">&#x27;&#x27;</span>)                <span class="comment">// 得到身份证数组</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_">isletidityBrithBy18IdCard</span>(idCard) &amp;&amp; <span class="title function_">isTrueletidateCodeBy18IdCard</span>(aIdCard)) &#123;   <span class="comment">// 进行18位身份证的基本验证和第18位的验证</span></span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断身份证号码为18位时最后的验证位是否正确</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> aIdCard 身份证号码数组</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isTrueletidateCodeBy18IdCard</span> (aIdCard) &#123;</span><br><span class="line">  <span class="keyword">let</span> sum = <span class="number">0</span>                             <span class="comment">// 声明加权求和变量</span></span><br><span class="line">  <span class="keyword">if</span> (aIdCard[<span class="number">17</span>].<span class="title function_">toLowerCase</span>() === <span class="string">&#x27;x&#x27;</span>) &#123;</span><br><span class="line">    aIdCard[<span class="number">17</span>] = <span class="number">10</span>                    <span class="comment">// 将最后位为x的验证码替换为10方便后续操作</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">17</span>; i++) &#123;</span><br><span class="line">    sum += <span class="title class_">Wi</span>[i] * aIdCard[i]            <span class="comment">// 加权求和</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> <span class="title class_">CodePosition</span> = sum % <span class="number">11</span>                <span class="comment">// 得到验证码所位置</span></span><br><span class="line">  <span class="keyword">if</span> (aIdCard[<span class="number">17</span>] === letideCode[<span class="title class_">CodePosition</span>]) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 验证18位数身份证号码中的生日是否是有效生日</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> idCard 18位书身份证字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isletidityBrithBy18IdCard</span> (idCard18) &#123;</span><br><span class="line">  <span class="keyword">let</span> year = idCard18.<span class="title function_">substring</span>(<span class="number">6</span>, <span class="number">10</span>)</span><br><span class="line">  <span class="keyword">let</span> month = idCard18.<span class="title function_">substring</span>(<span class="number">10</span>, <span class="number">12</span>)</span><br><span class="line">  <span class="keyword">let</span> day = idCard18.<span class="title function_">substring</span>(<span class="number">12</span>, <span class="number">14</span>)</span><br><span class="line">  <span class="keyword">let</span> tempDate = <span class="keyword">new</span> <span class="title class_">Date</span>(year, <span class="built_in">parseFloat</span>(month) - <span class="number">1</span>, <span class="built_in">parseFloat</span>(day))</span><br><span class="line">  <span class="comment">// 这里用getFullYear()获取年份，避免千年虫问题</span></span><br><span class="line">  <span class="keyword">if</span> (tempDate.<span class="title function_">getFullYear</span>() !== <span class="built_in">parseFloat</span>(year) || tempDate.<span class="title function_">getMonth</span>() !== <span class="built_in">parseFloat</span>(month) - <span class="number">1</span> || tempDate.<span class="title function_">getDate</span>() !== <span class="built_in">parseFloat</span>(day)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 验证15位数身份证号码中的生日是否是有效生日</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param</span> idCard15 15位书身份证字符串</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">isletidityBrithBy15IdCard</span> (idCard15) &#123;</span><br><span class="line">  <span class="keyword">let</span> year = idCard15.<span class="title function_">substring</span>(<span class="number">6</span>, <span class="number">8</span>)</span><br><span class="line">  <span class="keyword">let</span> month = idCard15.<span class="title function_">substring</span>(<span class="number">8</span>, <span class="number">10</span>)</span><br><span class="line">  <span class="keyword">let</span> day = idCard15.<span class="title function_">substring</span>(<span class="number">10</span>, <span class="number">12</span>)</span><br><span class="line">  <span class="keyword">let</span> tempDate = <span class="keyword">new</span> <span class="title class_">Date</span>(year, <span class="built_in">parseFloat</span>(month) - <span class="number">1</span>, <span class="built_in">parseFloat</span>(day))</span><br><span class="line">  <span class="comment">// 对于老身份证中的你年龄则不需考虑千年虫问题而使用getYear()方法</span></span><br><span class="line">  <span class="keyword">if</span> (tempDate.<span class="title function_">getYear</span>() !== <span class="built_in">parseFloat</span>(year) || tempDate.<span class="title function_">getMonth</span>() !== <span class="built_in">parseFloat</span>(month) - <span class="number">1</span> || tempDate.<span class="title function_">getDate</span>() !== <span class="built_in">parseFloat</span>(day)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 去掉字符串头尾空格</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">trim</span> (str) &#123;</span><br><span class="line">  <span class="keyword">return</span> str.<span class="title function_">replace</span>(<span class="regexp">/(^\s*)|(\s*$)/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title class_">IdCardletidate</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
      </tags>
  </entry>
  <entry>
    <title>linux 常用命令</title>
    <url>/2018/10/26/linux%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h3 id="删除命令"><a href="#删除命令" class="headerlink" title="删除命令"></a>删除命令</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 常规删除a.txt文件</span><br><span class="line">rm a.txt</span><br><span class="line"></span><br><span class="line"># 强行删除file.log文件</span><br><span class="line"> rm -f file.log</span><br><span class="line"> </span><br><span class="line"># 删除dirname目录下的所有东西</span><br><span class="line">rm -R dir dirname</span><br><span class="line"></span><br><span class="line"># 删除以 -f 开头的文件</span><br><span class="line">touch ./-f</span><br><span class="line"></span><br><span class="line"># 删除文件夹</span><br><span class="line">rm -rf 文件夹</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>linux</tag>
      </tags>
  </entry>
  <entry>
    <title>mac 安装 nvm</title>
    <url>/2023/01/17/mac%20%E5%AE%89%E8%A3%85%20nvm/</url>
    <content><![CDATA[<blockquote>
<p>卸载node</p>
</blockquote>
<br/>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">brew install nvm </span><br></pre></td></tr></table></figure>
<br/>


<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">echo &quot;source $(brew --prefix nvm)/nvm.sh&quot; &gt;&gt; .bash_profile</span><br></pre></td></tr></table></figure>
<br/>

<p>修改 .bash_profile 文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim .bash_profile</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export NVM_DIR=&quot;$HOME/.nvm&quot;</span><br><span class="line">[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \. &quot;$NVM_DIR/nvm.sh&quot;  # This loads nvm</span><br><span class="line">[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \. &quot;$NVM_DIR/bash_completion&quot;  # This loads nvm bash_completion</span><br><span class="line"></span><br><span class="line"># 解决关闭终端后nvm、node、npm命令失效</span><br><span class="line">source ~/.bash_profile </span><br></pre></td></tr></table></figure>
<br/>
]]></content>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx http&amp;https配置</title>
    <url>/2018/10/26/nginx%20http&amp;https%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>nginx版本：1.12.2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 首先找到nginx.conf</span><br><span class="line">// 查看nginx.conf 路径</span><br><span class="line">nginx -t</span><br></pre></td></tr></table></figure>
<p>*注：以下配置重启才能生效</p>
<h1 id="http配置"><a href="#http配置" class="headerlink" title="http配置"></a>http配置</h1><h2 id="1、配置域名"><a href="#1、配置域名" class="headerlink" title="1、配置域名"></a>1、配置域名</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 比如配置成baidu.com</span><br><span class="line">http &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80 default_server;</span><br><span class="line">        listen       [::]:80 default_server;</span><br><span class="line">        server_name  baidu.com;             &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>

<h2 id="2、域名的访问地址"><a href="#2、域名的访问地址" class="headerlink" title="2、域名的访问地址"></a>2、域名的访问地址</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http &#123;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80 default_server;</span><br><span class="line">        listen       [::]:80 default_server;</span><br><span class="line">        server_name  baidu.com;                 //  域名</span><br><span class="line">        root         /server/www/               //  访问baidu.com 所访问的服务器路径</span><br><span class="line">    &#125;</span><br><span class="line">&#125;    </span><br></pre></td></tr></table></figure>

<h1 id="http2-amp-https"><a href="#http2-amp-https" class="headerlink" title="http2 &amp; https"></a>http2 &amp; https</h1><ul>
<li>配置域名和访问的路径与http完全相同，区别在于证书</li>
<li>查看443端口是否打开</li>
</ul>
<h2 id="1-找个个证书"><a href="#1-找个个证书" class="headerlink" title="1.找个个证书"></a>1.找个个证书</h2><h2 id="2-修改nginx-conf-文件"><a href="#2-修改nginx-conf-文件" class="headerlink" title="2.修改nginx.conf 文件"></a>2.修改nginx.conf 文件</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">      listen       443 ssl http2 default_server;</span><br><span class="line">      listen       [::]:443 ssl http2 default_server;</span><br><span class="line">      server_name  m.xxx.com;</span><br><span class="line">      root         /service;</span><br><span class="line"> </span><br><span class="line">      ssl_certificate &quot;/etc/nginx/cert/214744744310771.pem&quot;;         //  证书目录</span><br><span class="line">      ssl_certificate_key &quot;/etc/nginx/cert/214744744310771.key&quot;;     //  证明目录</span><br><span class="line">      ssl_session_cache shared:SSL:1m;</span><br><span class="line">      ssl_session_timeout  5m;</span><br><span class="line">      ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">      ssl_prefer_server_ciphers on;</span><br><span class="line"> </span><br><span class="line">      # Load configuration files for the default server block.</span><br><span class="line">      include /etc/nginx/default.d/*.conf;</span><br><span class="line"> </span><br><span class="line">      location / &#123;</span><br><span class="line">      &#125;</span><br><span class="line"> </span><br><span class="line">      error_page 404 /404.html;</span><br><span class="line">          location = /40x.html &#123;</span><br><span class="line">      &#125;</span><br><span class="line"> </span><br><span class="line">      error_page 500 502 503 504 /50x.html;</span><br><span class="line">          location = /50x.html &#123;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="3-查看结果"><a href="#3-查看结果" class="headerlink" title="3.查看结果"></a>3.查看结果</h2><p>重启nginx</p>
]]></content>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>mysql 修改时区</title>
    <url>/2019/03/01/mysql%20%E6%97%B6%E5%8C%BA/</url>
    <content><![CDATA[<p>mysql默认使用的是UTC通用标准时</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="number">1.</span> 可以将数据库的时区也改成utc的</span><br><span class="line"><span class="number">2.</span> 在连接mysql的配置文件中添加一条，<span class="attr">timezone</span>:<span class="string">&quot;08:00&quot;</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>mysql</tag>
      </tags>
  </entry>
  <entry>
    <title>Nginx 反向代理解决跨域</title>
    <url>/2019/08/26/nginx%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E8%A7%A3%E5%86%B3%E8%B7%A8%E5%9F%9F/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">location /api/ &#123;</span><br><span class="line">   rewrite  ^/api/(.*)$ /$1 break;</span><br><span class="line">   proxy_pass http://bbb.com:3000/;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx 相关命令</title>
    <url>/2018/12/18/nginx%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h4 id="查看版本"><a href="#查看版本" class="headerlink" title="查看版本"></a>查看版本</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -v</span><br></pre></td></tr></table></figure>

<h4 id="验证配置是否正确"><a href="#验证配置是否正确" class="headerlink" title="验证配置是否正确"></a>验证配置是否正确</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -t</span><br></pre></td></tr></table></figure>
<p>通过语法测试，并不一定就代表配置文件真的是没问题的。 可以通过-c选项来进一步进行测试</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -t -c </span><br></pre></td></tr></table></figure>


<h4 id="快速-启动-关闭-重启-Nginx"><a href="#快速-启动-关闭-重启-Nginx" class="headerlink" title="快速 启动|关闭|重启 Nginx"></a>快速 启动|关闭|重启 Nginx</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -s reload|reopen|stop|quit</span><br></pre></td></tr></table></figure>

<h4 id="优雅地停止-Nginx"><a href="#优雅地停止-Nginx" class="headerlink" title="优雅地停止 Nginx"></a>优雅地停止 Nginx</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nginx -s quit</span><br><span class="line"></span><br><span class="line">// 或者</span><br><span class="line"></span><br><span class="line">kill -s SIGQUIT &lt;nginx master pid&gt;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx 开机启动</title>
    <url>/2018/09/17/nginx%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8/</url>
    <content><![CDATA[<p>nginx版本：1.12.2</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo systemctl enable nginx.service</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx 禁止未绑定域名或IP访问</title>
    <url>/2018/10/08/nginx%E7%A6%81%E6%AD%A2%E6%9C%AA%E7%BB%91%E5%AE%9A%E5%9F%9F%E5%90%8D%E6%88%96IP%E8%AE%BF%E9%97%AE443%E3%80%8180%E7%AB%AF%E5%8F%A3/</url>
    <content><![CDATA[<blockquote>
<p>把下面这个server  放到最前面<br>把其他server里 listen 中的  default_server删掉</p>
</blockquote>
<h4 id="80端口"><a href="#80端口" class="headerlink" title="80端口"></a>80端口</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80 default_server;</span><br><span class="line">    server_name  _;</span><br><span class="line">    return       403;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="443端口"><a href="#443端口" class="headerlink" title="443端口"></a>443端口</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       80 default_server;</span><br><span class="line">    listen       443 default_server;</span><br><span class="line">    server_name  _;</span><br><span class="line">    return       403;</span><br><span class="line"></span><br><span class="line">    ssl_certificate &quot;/etc/nginx/cert/214744744310771.pem&quot;;</span><br><span class="line">    ssl_certificate_key &quot;/etc/nginx/cert/214744744310771.key&quot;;</span><br><span class="line">    ssl_session_cache shared:SSL:1m;</span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line">    ssl_ciphers HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers on;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>个人感觉443的没有太大用处 因为没有证书浏览器直接显示 不是私密链接</p>
</blockquote>
]]></content>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>nginx 重定向</title>
    <url>/2018/10/26/nginx%E9%87%8D%E5%AE%9A%E5%90%91/</url>
    <content><![CDATA[<h3 id="http重定向到https"><a href="#http重定向到https" class="headerlink" title="http重定向到https"></a>http重定向到https</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">server &#123;  </span><br><span class="line">    listen  111.11.1.111:80;  </span><br><span class="line">    server_name test.com;  </span><br><span class="line">      </span><br><span class="line">    rewrite ^(.*)$  https://$host$1 permanent;  </span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>nginx</tag>
      </tags>
  </entry>
  <entry>
    <title>node 中的 this 指针</title>
    <url>/2019/01/19/node%E4%B8%ADthis%E6%8C%87%E9%92%88/</url>
    <content><![CDATA[<h1 id="全局中的this"><a href="#全局中的this" class="headerlink" title="全局中的this"></a>全局中的this</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">num</span> = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)                   <span class="comment">// &#123;&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">num</span>)               <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">global</span>.<span class="property">num</span>)             <span class="comment">// 20</span></span><br></pre></td></tr></table></figure>

<h1 id="函数中this"><a href="#函数中this" class="headerlink" title="函数中this"></a>函数中this</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">fn</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">num</span> = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>()</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>)                   <span class="comment">// &#123;&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">num</span>)               <span class="comment">// undefined</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">global</span>.<span class="property">num</span>)             <span class="comment">// 20</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">fn2</span>(<span class="params"></span>)&#123;</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">age</span> = <span class="number">18</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">fn2</span>();</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);              <span class="comment">// global</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">age</span>);          <span class="comment">// 18</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">global</span>.<span class="property">age</span>);        <span class="comment">// 18</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">fn</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">Fn</span>(<span class="params"></span>)&#123;</span><br><span class="line">  <span class="variable language_">this</span>.<span class="property">num</span> = <span class="number">998</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> fn = <span class="keyword">new</span> <span class="title class_">Fn</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>);                  <span class="comment">// &#123;&#125;</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(fn.<span class="property">num</span>);                <span class="comment">// 998</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">global</span>.<span class="property">num</span>);            <span class="comment">// undefined</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>package.json 常见配置</title>
    <url>/2023/02/06/npm%20package.json%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p><a href="https://docs.npmjs.com/cli/v8/configuring-npm/package-json/">package.json 官方文档</a></p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目名称&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;version&quot;</span><span class="punctuation">:</span> <span class="string">&quot;当前版本号&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;description&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目描述&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;keywords&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;关键字&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;关键字&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;author&quot;</span><span class="punctuation">:</span> <span class="string">&quot;作者&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;contributors&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;贡献者 &lt;邮箱&gt; （链接）&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;贡献者 &lt;邮箱&gt; （链接）&quot;</span></span><br><span class="line">  <span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 或</span></span><br><span class="line">  <span class="comment">//  &quot;contributors&quot;: [</span></span><br><span class="line">  <span class="comment">//    &#123;</span></span><br><span class="line">  <span class="comment">//      name: &quot;贡献者&quot;,</span></span><br><span class="line">  <span class="comment">//      email: &quot;xxx@xx.com&quot;,</span></span><br><span class="line">  <span class="comment">//      url: &quot;链接&quot;</span></span><br><span class="line">  <span class="comment">//    &#125;</span></span><br><span class="line">  <span class="comment">//  ],</span></span><br><span class="line">  <span class="attr">&quot;homepage&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目主页&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;repository&quot;</span><span class="punctuation">:</span> <span class="string">&quot;仓库地址&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="comment">// 或</span></span><br><span class="line">  <span class="comment">// &quot;repository&quot;: &#123;</span></span><br><span class="line">  <span class="comment">//  &quot;type&quot;: &quot;git&quot;,</span></span><br><span class="line">  <span class="comment">//  &quot;url&quot;: &quot;仓库地址&quot;</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line">  <span class="attr">&quot;bugs&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;url&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bug反馈地址，常见的就是github 中的 issues&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;dependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;生产依赖包名&quot;</span><span class="punctuation">:</span> <span class="string">&quot;版本号， 安装固定版本号 1.0.0&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;生产依赖包名&quot;</span><span class="punctuation">:</span> <span class="string">&quot;安装1.0.x最新版本 ～1.0.0(不低于1.0.0)&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;生产依赖包名&quot;</span><span class="punctuation">:</span> <span class="string">&quot;安装1.x.x最新版本 ^1.0.0(不低于1.0.0)&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;生产依赖包名&quot;</span><span class="punctuation">:</span> <span class="string">&quot;安装最新版本 latest&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;devDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;开发依赖包&quot;</span><span class="punctuation">:</span> <span class="string">&quot;版本号&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;peerDependencies&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;包名&quot;</span><span class="punctuation">:</span> <span class="string">&quot;项目依赖版本与用户依赖版本冲突所使用的版本&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>node 日志 log4js</title>
    <url>/2019/01/19/node%E6%97%A5%E5%BF%97%20log4js/</url>
    <content><![CDATA[<h3 id="安装log4js"><a href="#安装log4js" class="headerlink" title="安装log4js"></a>安装log4js</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">npm install log4js</span><br><span class="line"><span class="string">``</span><span class="string">`     </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">### 简单实用</span></span><br><span class="line"><span class="string">`</span><span class="string">``</span>javascript</span><br><span class="line"><span class="keyword">const</span> log4js = <span class="built_in">require</span>(<span class="string">&#x27;log4js&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> logger = log4js.<span class="title function_">getLogger</span>();</span><br><span class="line">logger.<span class="property">level</span> = <span class="string">&#x27;debug&#x27;</span>; </span><br><span class="line">logger.<span class="title function_">debug</span>(<span class="string">&quot;Some debug messages&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id=""><a href="#" class="headerlink" title=""></a></h3><blockquote>
<p>如果不调用configure，log4js将使用LOG4JS_CONFIG（如果已定义）或默认配置。</p>
</blockquote>
<blockquote>
<p>默认配置定义了一个appender，它将使用彩色布局记录到stdout，但也将默认日志级别定义为OFF - 这意味着不会输出任何日志。</p>
</blockquote>
<blockquote>
<p>配置对象必须至少定义一个appender和一个默认类别。如果配置无效，Log4js将抛出异常。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> log4js = <span class="built_in">require</span>(<span class="string">&#x27;log4js&#x27;</span>);</span><br><span class="line"></span><br><span class="line">log4js.<span class="title function_">configure</span>(object || string)      <span class="comment">//  配置入口。string参数被视为用于加载配置的文件名(json文件)</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">log4js.<span class="title function_">configure</span>(&#123;</span><br><span class="line">    <span class="attr">levels</span>: <span class="title class_">Object</span>,                     <span class="comment">//  用于定义自定义日志级别或重新定义现有日志级别</span></span><br><span class="line">    <span class="attr">appenders</span>: <span class="title class_">Object</span>,                  <span class="comment">//  Appenders将日志事件序列化为某种形式的输出。</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><a href="https://log4js-node.github.io/log4js-node/api.html">jog4js官方文档</a></p>
]]></content>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
  <entry>
    <title>npm发包、更新与删除</title>
    <url>/2023/02/14/npm%E5%8F%91%E5%8C%85%E3%80%81%E6%9B%B4%E6%96%B0%E4%B8%8E%E5%88%A0%E9%99%A4/</url>
    <content><![CDATA[<h1 id="发包"><a href="#发包" class="headerlink" title="发包"></a>发包</h1><h2 id="创建包"><a href="#创建包" class="headerlink" title="创建包"></a>创建包</h2><ol>
<li>新建目录</li>
<li>创建文件<code>package.json</code> <code>index.js</code> <code>README.md</code></li>
<li>配置 <code>package.json</code> <code>index.js</code> 文件<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;包名&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,     // 版本</span><br><span class="line">  &quot;description&quot;: &quot;描述&quot;, </span><br><span class="line">  &quot;main&quot;: &quot;index.js&quot;,     // 入口文件</span><br><span class="line">  &quot;author&quot;: &quot;作者&quot;,</span><br><span class="line">  &quot;license&quot;: &quot;ISC&quot;,       // 证书</span><br><span class="line">  &quot;keywords&quot;: [&#x27;关键字1&#x27;, &#x27;关键字2&#x27;],</span><br><span class="line">  &quot;publishConfig&quot;: &#123;</span><br><span class="line">    &quot;access&quot;: &quot;public&quot;,   // 公共包</span><br><span class="line">    &quot;registry&quot;: &quot;https://registry.npmjs.org/&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">a</span>: <span class="string">&#x27;a&#x27;</span>,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 切换源</span><br><span class="line">npm config set registry https://registry.npmjs.org</span><br><span class="line"></span><br><span class="line">// 注册</span><br><span class="line">npm adduser</span><br><span class="line"></span><br><span class="line">// 登录</span><br><span class="line">npm login</span><br><span class="line"></span><br><span class="line">// 发布</span><br><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<h2 id="发布带scope命名空间的包"><a href="#发布带scope命名空间的包" class="headerlink" title="发布带scope命名空间的包"></a>发布带scope命名空间的包</h2><ol>
<li>新建 <a href="https://www.npmjs.com/org/create">组织</a></li>
<li>修改 <code>package.json</code> name 属性<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;@[空间名]/[包名]&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li>发布<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure></li>
</ol>
<h1 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm version patch // 1.0.0 =&gt; 1.0.1</span><br><span class="line">npm version minor // 1.0.0 =&gt; 1.1.0</span><br><span class="line">npm version major // 1.0.0 =&gt; 2.0.0</span><br></pre></td></tr></table></figure>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>

<h1 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm deprecate 包名</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>React-px2rem</title>
    <url>/2018/12/28/react-px2rem/</url>
    <content><![CDATA[<p>安装依赖</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install px2rem-loader</span><br><span class="line"></span><br><span class="line">// rem 推荐 lib-flexible</span><br><span class="line">npm i lib-flexible --save</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// /src/index.js 添加</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;lib-flexible&#x27;</span></span><br></pre></td></tr></table></figure>
<p>暴露webpack配置文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run eject</span><br></pre></td></tr></table></figure>

<p>配置px2rem-px2rem-loader</p>
<ol>
<li>打开&#x2F;config&#x2F;webpack.config.js</li>
<li>修改 getStyleLoaders 方法</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getStyleLoaders</span> = (<span class="params">cssOptions, preProcessor</span>) =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> loaders = [</span><br><span class="line">      <span class="comment">//  ......</span></span><br><span class="line">      <span class="comment">//  在这个数组里最后添加px2rem-loader</span></span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="string">&#x27;px2rem-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">remUni</span>: <span class="number">75</span>,</span><br><span class="line">          <span class="attr">remPrecision</span>: <span class="number">8</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>);</span><br><span class="line">    <span class="keyword">if</span> (preProcessor) &#123;</span><br><span class="line">      loaders.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">loader</span>: <span class="built_in">require</span>.<span class="title function_">resolve</span>(preProcessor),</span><br><span class="line">        <span class="attr">options</span>: &#123;</span><br><span class="line">          <span class="attr">sourceMap</span>: isEnvProduction &amp;&amp; shouldUseSourceMap,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> loaders;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>

]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>npm 常用命令</title>
    <url>/2023/01/16/npm%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<h5 id="查看-npm-版本"><a href="#查看-npm-版本" class="headerlink" title="查看 npm 版本"></a>查看 npm 版本</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure>

<h5 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm init</span><br><span class="line"></span><br><span class="line">// 快速跳到问答界面</span><br><span class="line">npm init -yes</span><br><span class="line">// 简写</span><br><span class="line">npm init -y</span><br></pre></td></tr></table></figure>

<h5 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h5><p>项目中的 package.json 文件自动给下载项目中所需的全部依赖</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install</span><br><span class="line"></span><br><span class="line">// 简写</span><br><span class="line">npm i</span><br><span class="line"></span><br><span class="line">// 安装开发环境，不用于生产环境，在 package.json 文件中的 dependenceies 属性中</span><br><span class="line">// 安装推荐的版本</span><br><span class="line">npm install --sava-dev &lt;包名&gt;</span><br><span class="line">// 简写</span><br><span class="line">npm i -D &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">// 安装的包生产环境的，在 package.json 文件中的 dependenceies 属性中</span><br><span class="line">// 安装推荐的版本</span><br><span class="line">npm install --sava &lt;包名&gt;</span><br><span class="line">// 简写</span><br><span class="line">npm i -S &lt;包名&gt;</span><br><span class="line">npm i &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">// 安装包指定的版本</span><br><span class="line">npm i &lt;包名&gt;@&lt;版本号&gt;</span><br><span class="line"></span><br><span class="line">// 装到配置的全局</span><br><span class="line">npm i [-g|--global] &lt;包名&gt;</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 查看当前目录</span><br><span class="line">npm list</span><br><span class="line">npm ls</span><br><span class="line"></span><br><span class="line">// 查看全局</span><br><span class="line">npm list -g</span><br><span class="line"></span><br><span class="line">// 查看本地安装包的版本信息</span><br><span class="line">npm ls &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">// 查看全局安装包的版本信息</span><br><span class="line">npm ls &lt;包名&gt; -g</span><br><span class="line"></span><br><span class="line">// 查看远程所有版本信息</span><br><span class="line">npm info &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">// 查看历史版本</span><br><span class="line">// 最多100条</span><br><span class="line">npm view &lt;包名&gt; versions </span><br><span class="line">// 所有版本信息</span><br><span class="line">npm view &lt;包名&gt; versions --json</span><br><span class="line"></span><br><span class="line">// 查看最新版本信息</span><br><span class="line">npm view &lt;包名&gt; version  </span><br><span class="line"></span><br><span class="line">// 查看当前本地安装地址</span><br><span class="line">npm root</span><br><span class="line"> </span><br><span class="line">// 查看全局的包的安装路径</span><br><span class="line">npm root -g</span><br><span class="line"></span><br><span class="line">// 查看配置信息</span><br><span class="line">npm config list</span><br><span class="line"></span><br><span class="line">// 查看npm镜像设置</span><br><span class="line">npm config get registry</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="更新与卸载"><a href="#更新与卸载" class="headerlink" title="更新与卸载"></a>更新与卸载</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm update &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">npm update -g &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">npm uninstall &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">// 清除项目中没有被使用的依赖</span><br><span class="line">npm prune</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="运行命令"><a href="#运行命令" class="headerlink" title="运行命令"></a>运行命令</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run &lt;命令&gt;</span><br></pre></td></tr></table></figure>
<br/>

<h5 id="更改下载源"><a href="#更改下载源" class="headerlink" title="更改下载源"></a>更改下载源</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g cnpm --registry=https://registry.npmmirror.com</span><br><span class="line"></span><br><span class="line">npm config set registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">// 切换回默认全局镜像</span><br><span class="line">npm config set registry https://registry.npmjs.org</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm cache clean --force</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="帮助"><a href="#帮助" class="headerlink" title="帮助"></a>帮助</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm --help</span><br><span class="line"></span><br><span class="line">npm &lt;命令&gt; --help</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="账号"><a href="#账号" class="headerlink" title="账号"></a>账号</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 添加账号</span><br><span class="line">// 在指定注册表中创建或验证名为&lt;username&gt;的用户，并将凭据保存在到 .npmrc 文件中。如果未指定注册表，则使用默认注册表。</span><br><span class="line">npm adduser [--registry=url] [--scope=@orgname] [--always-auth] [--auth-type=legacy]</span><br><span class="line">npm login</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="发布"><a href="#发布" class="headerlink" title="发布"></a>发布</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm publish</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="撤销发布"><a href="#撤销发布" class="headerlink" title="撤销发布"></a>撤销发布</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm unpublish &lt;命令&gt;</span><br><span class="line"></span><br><span class="line">// 强制撤销</span><br><span class="line">npm unpublish test --force</span><br><span class="line"></span><br><span class="line">// 撤销发布自己发布过的某个版本代码</span><br><span class="line">npm unpublish test@1.0.2</span><br></pre></td></tr></table></figure>

<h5 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// 检查依赖是否已经弃用</span><br><span class="line">npm outdated</span><br><span class="line"></span><br><span class="line">// 打开默认浏览器跳转到github中包的主页</span><br><span class="line">npm home &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">// 打开默认浏览器跳转到github中包的页面</span><br><span class="line">npm repo &lt;包名&gt;</span><br><span class="line"></span><br><span class="line">// 打开默认浏览器跳转到github中包的README.MD文件</span><br><span class="line">npm docs &lt;包名&gt;</span><br></pre></td></tr></table></figure>
<br/>

]]></content>
      <tags>
        <tag>npm</tag>
      </tags>
  </entry>
  <entry>
    <title>React 边界错误</title>
    <url>/2022/12/28/react%E8%BE%B9%E7%95%8C%E9%94%99%E8%AF%AF/</url>
    <content><![CDATA[<p>部分 UI 的 JavaScript 错误不应该导致整个应用崩溃，为了解决这个问题，React 16 引入了一个新的概念 —— 错误边界</p>
<blockquote>
<p>错误边界无法捕获以下场景中产生的错误：</p>
<ul>
<li>事件处理</li>
<li>异步代码（例如 setTimeout 或 requestAnimationFrame 回调函数）</li>
<li>服务端渲染</li>
<li>它自身抛出来的错误（并非它的子组件）</li>
</ul>
</blockquote>
<p>如果一个 class 组件中定义了 <code>static getDerivedStateFromError()</code> 或 <code>componentDidCatch()</code> 这两个生命周期方法中的任意一个（或两个）时，那么它就变成一个错误边界。当抛出错误后，请使用 <code>static getDerivedStateFromError()</code> 渲染备用 UI ，使用 componentDidCatch() 打印错误信息。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ErrorBoundary</span> <span class="keyword">extends</span> <span class="title class_ inherited__">React.Component</span> &#123;</span><br><span class="line">  <span class="title function_">constructor</span>(<span class="params">props</span>) &#123;</span><br><span class="line">    <span class="variable language_">super</span>(props);</span><br><span class="line">    <span class="variable language_">this</span>.<span class="property">state</span> = &#123; <span class="attr">hasError</span>: <span class="literal">false</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">static</span> <span class="title function_">getDerivedStateFromError</span>(<span class="params">error</span>) &#123;</span><br><span class="line">    <span class="comment">// 更新 state 使下一次渲染能够显示降级后的 UI</span></span><br><span class="line">    <span class="keyword">return</span> &#123; <span class="attr">hasError</span>: <span class="literal">true</span> &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">componentDidCatch</span>(<span class="params">error, errorInfo</span>) &#123;</span><br><span class="line">    <span class="comment">// 你同样可以将错误日志上报给服务器</span></span><br><span class="line">    <span class="title function_">logErrorToMyService</span>(error, errorInfo);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="title function_">render</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">state</span>.<span class="property">hasError</span>) &#123;</span><br><span class="line">      <span class="comment">// 你可以自定义降级后的 UI 并渲染</span></span><br><span class="line">      <span class="keyword">return</span> <span class="language-xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Something went wrong.<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">props</span>.<span class="property">children</span>; </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ErrorBoundary</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">MyWidget</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ErrorBoundary</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>错误边界的工作方式类似于 JavaScript 的 catch {}，不同的地方在于错误边界只针对 React 组件。只有 class 组件才可以成为错误边界组件。大多数情况下, 你只需要声明一次错误边界组件, 并在整个应用中使用它。</p>
<p>注意错误边界仅可以捕获其子组件的错误，它无法捕获其自身的错误。如果一个错误边界无法渲染错误信息，则错误会冒泡至最近的上层错误边界，这也类似于 JavaScript 中 catch {} 的工作机制。</p>
]]></content>
      <tags>
        <tag>react</tag>
      </tags>
  </entry>
  <entry>
    <title>Ts 忽略校验</title>
    <url>/2023/01/17/ts%20%E5%BF%BD%E7%95%A5%E6%A0%A1%E9%AA%8C/</url>
    <content><![CDATA[<h5 id="单行"><a href="#单行" class="headerlink" title="单行"></a>单行</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// @ts-ignore</span><br></pre></td></tr></table></figure>
<br/>


<h5 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h5><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// @ts-nocheck # 忽略全文</span><br><span class="line">// @ts-check # 取消忽略全文</span><br></pre></td></tr></table></figure>
<br/>
]]></content>
      <tags>
        <tag>ts</tag>
      </tags>
  </entry>
  <entry>
    <title>Ts window 配置</title>
    <url>/2023/03/08/ts%20window%E9%85%8D%E7%BD%AE/</url>
    <content><![CDATA[<p>src&#x2F;global.d.ts</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> &#123;&#125;</span><br><span class="line"><span class="keyword">declare</span> <span class="variable language_">global</span> &#123;</span><br><span class="line">  <span class="keyword">interface</span> <span class="title class_">Window</span> &#123;</span><br><span class="line">    <span class="title class_">VConsole</span>: <span class="built_in">any</span>;<span class="comment">//全局变量名</span></span><br><span class="line">    <span class="attr">$</span>: <span class="built_in">any</span>;<span class="comment">//全局变量名</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br/>
<br/>
<br/>

<p>tsconfig.json</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  //...</span><br><span class="line">  &quot;include&quot;: [</span><br><span class="line">    //...</span><br><span class="line">    &quot;./src/global.d.ts&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ts</tag>
      </tags>
  </entry>
  <entry>
    <title>ts 找不到模块“.module.less”或其相应的类型声明</title>
    <url>/2023/03/10/ts%20%E6%89%BE%E4%B8%8D%E5%88%B0%E6%A8%A1%E5%9D%97%E2%80%9C.module.less%E2%80%9D%E6%88%96%E5%85%B6%E7%9B%B8%E5%BA%94%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%A3%B0%E6%98%8E/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">declare module &#x27;*.module.less&#x27; &#123;</span><br><span class="line">  const classes: &#123;</span><br><span class="line">    readonly [key: string]: string</span><br><span class="line">  &#125;</span><br><span class="line">  export default classes</span><br><span class="line">  declare module &#x27;*.less&#x27;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ts</tag>
      </tags>
  </entry>
  <entry>
    <title>vite 环境变量.md</title>
    <url>/2023/04/24/vite%20%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<p>&#x2F;&#x2F; package.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;scripts&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;dev&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server --mode dev&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;lq&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server --mode lq&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;prod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server --mode prod&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;abc&quot;</span><span class="punctuation">:</span> <span class="string">&quot;server --mode abc&quot;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; .env 文件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.env</span><br><span class="line">.env.dev</span><br><span class="line">.env.lq</span><br><span class="line">.env.prod</span><br><span class="line">.env.abc</span><br></pre></td></tr></table></figure>

<p>&#x2F;&#x2F; 程序内</p>
<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span>.<span class="property">meta</span>.<span class="property">env</span>[<span class="string">&#x27;环境变量key&#x27;</span>]</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>vite</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue px转化为rem</title>
    <url>/2019/08/16/vue%20px%E8%BD%AC%E5%8C%96%E4%B8%BArem/</url>
    <content><![CDATA[<p>index.html</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="vue3"><a href="#vue3" class="headerlink" title="vue3"></a>vue3</h1><h2 id="Viewport-布局"><a href="#Viewport-布局" class="headerlink" title="Viewport 布局"></a>Viewport 布局</h2><h3 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i amfe-flexible postcss-pxtorem;</span><br></pre></td></tr></table></figure>
<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">37.5</span>,</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Rem-布局适配"><a href="#Rem-布局适配" class="headerlink" title="Rem 布局适配"></a>Rem 布局适配</h2><h3 id="安装插件-1"><a href="#安装插件-1" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i amfe-flexible postcss-pxtorem;</span><br></pre></td></tr></table></figure>
<h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><p>postcss.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: &#123;</span><br><span class="line">    <span class="comment">// postcss-pxtorem 插件的版本需要 &gt;= 5.0.0</span></span><br><span class="line">    <span class="string">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">75</span>,</span><br><span class="line">      <span class="attr">exclude</span>: <span class="regexp">/node_modules/i</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="vite"><a href="#vite" class="headerlink" title="vite"></a>vite</h3><p>vite.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> postcsspxtoviewport <span class="keyword">from</span> <span class="string">&quot;postcss-px-to-viewport&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123; defineConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;vite&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="title function_">defineConfig</span>(&#123;</span><br><span class="line">  <span class="attr">css</span>: &#123;</span><br><span class="line">    <span class="attr">postcss</span>: &#123;</span><br><span class="line">      <span class="attr">plugins</span>: [</span><br><span class="line">        <span class="title function_">postcsspxtoviewport</span>(&#123;</span><br><span class="line">          <span class="attr">viewportWidth</span>: <span class="number">750</span>,</span><br><span class="line">          <span class="attr">exclude</span>: <span class="regexp">/node_modules/i</span>,</span><br><span class="line">        &#125;)</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="Vue2"><a href="#Vue2" class="headerlink" title="Vue2"></a>Vue2</h1><h2 id="vue-cli4"><a href="#vue-cli4" class="headerlink" title="vue-cli4"></a>vue-cli4</h2><h3 id="安装插件-2"><a href="#安装插件-2" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i amfe-flexible postcss-pxtorem -S;</span><br></pre></td></tr></table></figure>

<h3 id="配置插件"><a href="#配置插件" class="headerlink" title="配置插件"></a>配置插件</h3><p>mainjs</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;lib-flexible&#x27;</span></span><br></pre></td></tr></table></figure>
<p>vue.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">    <span class="attr">css</span>: &#123;</span><br><span class="line">        <span class="attr">loaderOptions</span>: &#123;</span><br><span class="line">          <span class="attr">css</span>: &#123;&#125;,</span><br><span class="line">          <span class="attr">postcss</span>: &#123;</span><br><span class="line">            <span class="attr">plugins</span>: [</span><br><span class="line">              <span class="built_in">require</span>(<span class="string">&#x27;postcss-pxtorem&#x27;</span>)(&#123;</span><br><span class="line">                <span class="attr">rootValue</span>: <span class="number">37.5</span></span><br><span class="line">              &#125;)</span><br><span class="line">            ]</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>或者 package.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;postcss&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;plugins&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;autoprefixer&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span><span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">      <span class="attr">&quot;postcss-pxtorem&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;rootValue&quot;</span><span class="punctuation">:</span> <span class="number">75</span></span><br><span class="line">      <span class="punctuation">&#125;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>
<p>或者 postcss.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: &#123;</span><br><span class="line">    <span class="string">&#x27;postcss-pxtorem&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">rootValue</span>: <span class="number">37.5</span>,</span><br><span class="line">      <span class="attr">propList</span>: [<span class="string">&#x27;*&#x27;</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="vue-cli3"><a href="#vue-cli3" class="headerlink" title="vue-cli3"></a>vue-cli3</h2><h3 id="安装插件-3"><a href="#安装插件-3" class="headerlink" title="安装插件"></a>安装插件</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i lib-flexible px2rem-loader -S;</span><br></pre></td></tr></table></figure>

<h3 id="配置插件-1"><a href="#配置插件-1" class="headerlink" title="配置插件"></a>配置插件</h3><p>main.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;lib-flexible&#x27;</span></span><br></pre></td></tr></table></figure>

<ol>
<li>打开build&#x2F;utils.js文件，找到exports.cssLoaders方法，在里面添加如下代码</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> px2remLoader = &#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&#x27;px2rem-loader&#x27;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">remUint</span>: <span class="number">75</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>打开build&#x2F;utils.js文件，找到generateLoaders方法</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generateLoaders</span>(<span class="params">loader, loaderOptions</span>) &#123;</span><br><span class="line">    <span class="keyword">var</span> loaders = [cssLoader, px2remLoader];                <span class="comment">//  1.添加px2remLoader 插件</span></span><br><span class="line">    <span class="keyword">if</span> (loader) &#123;</span><br><span class="line">      loaders.<span class="title function_">push</span>(&#123;</span><br><span class="line">        <span class="attr">loader</span>: loader + <span class="string">&#x27;-loader&#x27;</span>,</span><br><span class="line">        <span class="attr">options</span>: <span class="title class_">Object</span>.<span class="title function_">assign</span>(&#123;&#125;, loaderOptions, &#123;</span><br><span class="line">          <span class="attr">sourceMap</span>: options.<span class="property">sourceMap</span></span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;   </span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>build&#x2F;utils.js文件 添加 generateSassResourceLoader方法</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">generateSassResourceLoader</span> () &#123;                </span><br><span class="line">   <span class="keyword">const</span> loaders = [</span><br><span class="line">      cssLoader,</span><br><span class="line">      px2remLoader,</span><br><span class="line">      <span class="string">&#x27;less-loader&#x27;</span></span><br><span class="line">   ]</span><br><span class="line">   <span class="keyword">if</span> (options.<span class="property">extract</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="title class_">ExtractTextPlugin</span>.<span class="title function_">extract</span>(&#123;</span><br><span class="line">         <span class="attr">use</span>: loaders,</span><br><span class="line">         <span class="attr">fallback</span>: <span class="string">&#x27;vue-style-loader&#x27;</span></span><br><span class="line">      &#125;)</span><br><span class="line">   &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">       <span class="keyword">return</span> [<span class="string">&#x27;vue-style-loader&#x27;</span>].<span class="title function_">concat</span>(loaders)</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>修改 build&#x2F;utils.js文件 return</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">return</span> &#123;</span><br><span class="line">    <span class="attr">css</span>: <span class="title function_">generateLoaders</span>(),</span><br><span class="line">    <span class="attr">postcss</span>: <span class="title function_">generateLoaders</span>(),</span><br><span class="line">    <span class="attr">less</span>: <span class="title function_">generateSassResourceLoader</span>()                <span class="comment">//  修改less的值</span></span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>
</li>
<li><p>修改&#x2F;node_modules&#x2F;px2rem-loader&#x2F;lib&#x2F;px2rem-loader.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> loaderUtils = <span class="built_in">require</span>(<span class="string">&#x27;loader-utils&#x27;</span>)</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Px2</span>rem = <span class="built_in">require</span>(<span class="string">&#x27;px2rem&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">source</span>) &#123;</span><br><span class="line">  <span class="keyword">var</span> options = loaderUtils.<span class="title function_">getOptions</span>(<span class="variable language_">this</span>)</span><br><span class="line">  <span class="keyword">if</span> (<span class="regexp">/node_modules/</span>.<span class="title function_">test</span>(<span class="variable language_">this</span>.<span class="property">resourcePath</span>)) <span class="keyword">return</span> source</span><br><span class="line">  <span class="keyword">var</span> px2remIns = <span class="keyword">new</span> <span class="title class_">Px2</span>rem(options)</span><br><span class="line">  <span class="keyword">return</span> px2remIns.<span class="title function_">generateRem</span>(source)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="重启，一切ok"><a href="#重启，一切ok" class="headerlink" title="重启，一切ok~"></a>重启，一切ok~</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run dev</span><br></pre></td></tr></table></figure>

<h1 id="插件文档地址"><a href="#插件文档地址" class="headerlink" title="插件文档地址"></a>插件文档地址</h1><p><a href="https://github.com/evrone/postcss-px-to-viewport">postcss-px-to-viewport</a></p>
<p><a href="https://github.com/cuth/postcss-pxtorem">postcss-pxtorem</a></p>
<p><a href="https://github.com/amfe/lib-flexible/tree/master">lib-flexible</a></p>
<p><a href="https://github.com/amfe/lib-flexible">amfe-flexible</a></p>
]]></content>
      <tags>
        <tag>Vue2</tag>
        <tag>Vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>单页面配置页面标题</title>
    <url>/2018/12/19/vue%E5%8D%95%E9%A1%B5%E9%9D%A2%E9%85%8D%E7%BD%AE%E9%A1%B5%E9%9D%A2%E6%A0%87%E9%A2%98/</url>
    <content><![CDATA[<h1 id="vue2、3"><a href="#vue2、3" class="headerlink" title="vue2、3"></a>vue2、3</h1><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install vue-wechat-title --save</span><br></pre></td></tr></table></figure>


<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><blockquote>
<p>mian.js</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Vue.use(require(&#x27;vue-wechat-title&#x27;))</span><br></pre></td></tr></table></figure>

<blockquote>
<p>router.js</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   name: &#x27;Home&#x27;,</span><br><span class="line">   path: &#x27;/home&#x27;,</span><br><span class="line">   meta: &#123;</span><br><span class="line">     title: &#x27;首页&#x27;</span><br><span class="line">   &#125;,</span><br><span class="line">   component: require(&#x27;../views/Home.vue&#x27;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>App.vue </p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;router-view v-wechat-title=&quot;$route.meta.title&quot; img-set=&quot;/static/logo.png&quot;&gt;&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>



<p><a href="https://www.npmjs.com/package/vue-wechat-title">文档链接</a></p>
]]></content>
      <tags>
        <tag>Vue2</tag>
        <tag>Vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue 全局less sess变量</title>
    <url>/2018/12/19/vue%20%E5%85%A8%E5%B1%80less%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<h2 id="vue-cli4"><a href="#vue-cli4" class="headerlink" title="vue-cli4+"></a>vue-cli4+</h2><h2 id="安装插件"><a href="#安装插件" class="headerlink" title="#安装插件"></a>#安装插件</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn add --dev less-loader less</span><br><span class="line">yarn add --dev style-resources-loader</span><br><span class="line"></span><br><span class="line">npm install node-sass -D</span><br><span class="line">npm install sass-loader -D</span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><p>vue.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">sass</span>: &#123;</span><br><span class="line">    <span class="attr">loaderOptions</span>: &#123;</span><br><span class="line">      <span class="comment">//scss 全局变量引用</span></span><br><span class="line">      <span class="comment">//sass-loader v8-，这个选项名是 &quot;data&quot;</span></span><br><span class="line">      <span class="comment">//sass-loader v8 中，这个选项名是 &quot;prependData&quot;</span></span><br><span class="line">      <span class="comment">//sass-loader v10+，这个选项名是 &quot;additionalData&quot;</span></span><br><span class="line">      <span class="attr">sass</span>: &#123;</span><br><span class="line">        <span class="attr">prependData</span>: <span class="string">`@import &quot;&quot;;`</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">pluginOptions</span>: &#123; <span class="comment">// 第三方插件配置</span></span><br><span class="line">    <span class="string">&#x27;style-resources-loader&#x27;</span>: &#123;</span><br><span class="line">      <span class="attr">preProcessor</span>: <span class="string">&#x27;less&#x27;</span>,</span><br><span class="line">      <span class="attr">patterns</span>: [path.<span class="title function_">resolve</span>(__dirname, <span class="string">&#x27;&#x27;</span>)] <span class="comment">// less所在文件路径</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="vue-cli3"><a href="#vue-cli3" class="headerlink" title="vue-cli3"></a>vue-cli3</h2><h2 id="安装插件-1"><a href="#安装插件-1" class="headerlink" title="#安装插件"></a>#安装插件</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install sass-resources-loader</span><br></pre></td></tr></table></figure>

<h3 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">module: &#123;</span><br><span class="line">  rules: [</span><br><span class="line">    &#123;</span><br><span class="line">      test: /\.scss$/,</span><br><span class="line">      use: [</span><br><span class="line">        &#x27;style-loader&#x27;,</span><br><span class="line">        &#x27;css-loader&#x27;,</span><br><span class="line">        &#x27;postcss-loader&#x27;,</span><br><span class="line">        &#x27;sass-loader&#x27;,</span><br><span class="line">        &#123;</span><br><span class="line">          loader: &#x27;sass-resources-loader&#x27;,</span><br><span class="line">          options: &#123;</span><br><span class="line">            // Provide path to the file with resources</span><br><span class="line">            resources: &#x27;./path/to/resources.scss&#x27;,</span><br><span class="line"> </span><br><span class="line">            // Or array of paths</span><br><span class="line">            resources: [&#x27;./path/to/vars.scss&#x27;, &#x27;./path/to/mixins.scss&#x27;]</span><br><span class="line">          &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">      ],</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p><a href="https://www.npmjs.com/package/sass-resources-loader">sass-resources-loader文档</a></p>
]]></content>
      <tags>
        <tag>Vue2</tag>
        <tag>Vue3</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue 插件开发</title>
    <url>/2018/12/19/vue%E6%8F%92%E4%BB%B6%E5%BC%80%E5%8F%91/</url>
    <content><![CDATA[<h5 id="官方文档"><a href="#官方文档" class="headerlink" title="官方文档"></a>官方文档</h5><p><a href="https://cn.vuejs.org/v2/guide/plugins.html">传送门</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// Vue.js 的插件应该有一个公开方法 install。这个方法的第一个参数是 Vue 构造器，第二个参数是一个可选的选项对象：</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">MyPlugin.install = function (Vue, options) &#123;</span><br><span class="line">  // 1. 添加全局方法或属性</span><br><span class="line">  Vue.myGlobalMethod = function () &#123;</span><br><span class="line">    // 逻辑...</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 2. 添加全局资源</span><br><span class="line">  Vue.directive(&#x27;my-directive&#x27;, &#123;</span><br><span class="line">    bind (el, binding, vnode, oldVnode) &#123;</span><br><span class="line">      // 逻辑...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // 3. 注入组件</span><br><span class="line">  Vue.mixin(&#123;</span><br><span class="line">    created: function () &#123;</span><br><span class="line">      // 逻辑...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  // 4. 添加实例方法</span><br><span class="line">  Vue.prototype.$myMethod = function (methodOptions) &#123;</span><br><span class="line">    // 逻辑...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="alert插件开发"><a href="#alert插件开发" class="headerlink" title="alert插件开发"></a>alert插件开发</h5><ol>
<li><p>先写个alert组件</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;ComAlert&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;content&quot; v-for=&quot;(item, index) in content&quot; :key=&quot;index&quot;&gt;&#123;&#123;item&#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &#x27;ComAlert&#x27;,</span><br><span class="line">        data () &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                content: [],</span><br><span class="line">                timer: []</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        created () &#123;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            push (text) &#123;</span><br><span class="line">                const s = 2000</span><br><span class="line">                this.content.unshift(text)</span><br><span class="line">                const timer = setTimeout(() =&gt; &#123;</span><br><span class="line">                    this.content.pop()</span><br><span class="line">                &#125;, s)</span><br><span class="line"></span><br><span class="line">                this.timer.push(timer)</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;style scoped lang=&quot;less&quot; rel=&quot;stylesheet/less&quot;&gt;</span><br><span class="line">    @import &quot;./Alert.less&quot;;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p>再写个 alert.js</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import ComAlert from &#x27;./Alert.vue&#x27;</span><br><span class="line"></span><br><span class="line">const alert = &#123;</span><br><span class="line">    install (Vue, option) &#123;</span><br><span class="line">        const Alert = Vue.extend(ComAlert)</span><br><span class="line">        let $vm = new Alert(&#123;</span><br><span class="line">            el: document.createElement(&#x27;div&#x27;)</span><br><span class="line">        &#125;);</span><br><span class="line">        document.body.appendChild($vm.$el);</span><br><span class="line"></span><br><span class="line">        Vue.prototype.$_alert = (alertText = &#x27;&#x27;) =&gt; &#123;</span><br><span class="line">            return $vm.push(alertText)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default alert</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>mian.js </p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import Alert from &#x27;./components/Alert/Alert&#x27;</span><br><span class="line"></span><br><span class="line">Vue.use(Alert)</span><br></pre></td></tr></table></figure>
</li>
<li><p>调用</p>
<figure class="highlight javascript"><figcaption><span>1.8</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="variable language_">this</span>.$_alert(<span class="string">&#x27;提示内容&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
</ol>
]]></content>
      <tags>
        <tag>Vue2</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue 本地开发跨域</title>
    <url>/2019/02/19/vue%E6%9C%AC%E5%9C%B0%E5%BC%80%E5%8F%91%E8%B7%A8%E5%9F%9F/</url>
    <content><![CDATA[<h1 id="vue-cli3"><a href="#vue-cli3" class="headerlink" title="vue-cli3"></a>vue-cli3</h1><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">devServer</span>: &#123;</span><br><span class="line">    <span class="attr">proxy</span>: &#123;</span><br><span class="line">      <span class="string">&#x27;/api&#x27;</span>: &#123;</span><br><span class="line">        <span class="attr">target</span>: <span class="string">&#x27;http://localhost:3000&#x27;</span>, <span class="comment">//对应自己的接口</span></span><br><span class="line">        <span class="attr">changeOrigin</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">ws</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">pathRewrite</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;^/api&#x27;</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ajax</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 请求 http://localhost:8080/api/XXXXXX </span></span><br><span class="line"><span class="comment">// 实际请求  http://localhost:3000/XXXXXX</span></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Vue2</tag>
      </tags>
  </entry>
  <entry>
    <title>单页面配置页面标题</title>
    <url>/2018/12/19/vue%E8%B7%AF%E5%BE%84%E5%88%AB%E5%90%8D/</url>
    <content><![CDATA[<p>修改 &#x2F;build&#x2F;webpack.base.conf.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">let</span> webpackConfig = &#123;</span><br><span class="line">    <span class="attr">resolve</span>: &#123;</span><br><span class="line">        <span class="attr">extensions</span>: [<span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.vue&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>],</span><br><span class="line">        <span class="attr">alias</span>: &#123;</span><br><span class="line">          <span class="string">&#x27;别名&#x27;</span>: <span class="string">&quot;路径&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Vue2</tag>
      </tags>
  </entry>
  <entry>
    <title>Vue 页面加载进度条</title>
    <url>/2018/12/19/vue%E9%A1%B5%E9%9D%A2%E5%8A%A0%E8%BD%BD%E8%BF%9B%E5%BA%A6%E6%9D%A1/</url>
    <content><![CDATA[<h1 id="页面加载进度条"><a href="#页面加载进度条" class="headerlink" title="页面加载进度条"></a>页面加载进度条</h1><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save nprogress</span><br></pre></td></tr></table></figure>

<h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><blockquote>
<p>mian.js</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">import NProgress from &#x27;nprogress&#x27;</span><br><span class="line">import &#x27;nprogress/nprogress.css&#x27;</span><br><span class="line"></span><br><span class="line">router.beforeEach((to, from, next) =&gt; &#123;</span><br><span class="line">    NProgress.start();</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.afterEach(transition =&gt; &#123;</span><br><span class="line">  NProgress.done();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>Vue2</tag>
      </tags>
  </entry>
  <entry>
    <title>webpack5 优化</title>
    <url>/2023/01/05/webpack5%20%E6%89%93%E5%8C%85%E4%BC%98%E5%8C%96/</url>
    <content><![CDATA[<h1 id="配置打包体积分析与耗时分析"><a href="#配置打包体积分析与耗时分析" class="headerlink" title="配置打包体积分析与耗时分析"></a>配置打包体积分析与耗时分析</h1><p><a href="https://github.com/webpack-contrib/webpack-bundle-analyzer">Webpack Bundle Analyzer 文档</a></p>
<p><a href="https://github.com/stephencookdev/speed-measure-webpack-plugin#readme">Speed Measure Plugin 文档</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn add webpack-bundle-analyzer speed-measure-webpack-plugin</span><br></pre></td></tr></table></figure>

<p>webpakc.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 可视化打包</span></span><br><span class="line"><span class="keyword">const</span> &#123; <span class="title class_">BundleAnalyzerPlugin</span> &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>);</span><br><span class="line"><span class="comment">// 打包耗时分析插件</span></span><br><span class="line"><span class="keyword">const</span> <span class="title class_">SpeedMeasureWebpackPlugin</span> = <span class="built_in">require</span>(<span class="string">&#x27;speed-measure-webpack-plugin&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">BundleAnalyzerPlugin</span>(),</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">SpeedMeasureWebpackPlugin</span>(),</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">  ]</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>根据体积分析与耗时插件的分析结果在针对优化</p>
<h1 id="配置-externals"><a href="#配置-externals" class="headerlink" title="配置 externals"></a>配置 externals</h1><p><a href="https://webpack.docschina.org/configuration/externals#root">externals 文档</a></p>
<p>webpakc.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HtmlWebpackPlugin</span>(&#123;</span><br><span class="line">      <span class="attr">files</span>: &#123;</span><br><span class="line">        <span class="attr">js</span>: [</span><br><span class="line">          <span class="string">&#x27;./static/js/lodash.min.js&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;./static/js/crypto-js.js&#x27;</span>,</span><br><span class="line">          <span class="string">&#x27;./static/js/vconsole.min.js&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">css</span>: []</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">externals</span>: &#123;</span><br><span class="line">    <span class="attr">vconsole</span>: <span class="string">&#x27;VConsole&#x27;</span>,</span><br><span class="line">    <span class="attr">lodash</span>: <span class="string">&#x27;_&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;crypto-js&#x27;</span>: <span class="string">&#x27;CryptoJS&#x27;</span>,</span><br><span class="line">    <span class="comment">// vue react vue-router....</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>项目中可根据环境针对配置</li>
</ul>
<h1 id="配置-Tree-Shaking"><a href="#配置-Tree-Shaking" class="headerlink" title="配置 Tree Shaking"></a>配置 Tree Shaking</h1><p><a href="https://webpack.docschina.org/guides/tree-shaking/#root">Tree Shaking 文档</a></p>
<p>package.json</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;xxx&quot;,</span><br><span class="line">  // &quot;sideEffects&quot;: false,</span><br><span class="line">  &quot;sideEffects&quot;: [</span><br><span class="line">    &quot;*.less&quot;,</span><br><span class="line">    &quot;*.css&quot;</span><br><span class="line">  ],</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&#x27;development&#x27;</span>,</span><br><span class="line">  <span class="attr">optimization</span>: &#123;</span><br><span class="line">    <span class="attr">usedExports</span>: <span class="literal">true</span>,</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="comment">/*#__PURE__*/</span> () =&gt; &#123;</span><br><span class="line">  <span class="comment">/// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>开启  Tree Shaking 后 <code>import &#39;./index.less&#39;</code> 将不会被打包…</li>
</ul>
<p>解决方案<br>package.json</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;sideEffects&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">    <span class="string">&quot;**/*.less&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="string">&quot;antd-mobile/es/global&quot;</span></span><br><span class="line">  <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>添加副作用 <code>sideEffects</code> 后，下面情况样式失效<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./index.less&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="keyword">default</span> <span class="keyword">as</span> <span class="title class_">CompontentA</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./CompontentA&#x27;</span></span><br><span class="line"><span class="keyword">export</span> &#123; <span class="title class_">CompontentB</span> &#125; <span class="keyword">from</span> <span class="string">&#x27;./Compontent&#x27;</span>; <span class="comment">// 图片压缩</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="多线程打包"><a href="#多线程打包" class="headerlink" title="多线程打包"></a>多线程打包</h1><h2 id="HappyPack-不推荐，不再维护"><a href="#HappyPack-不推荐，不再维护" class="headerlink" title="HappyPack (不推荐，不再维护)"></a>HappyPack (不推荐，不再维护)</h2><p><a href="https://github.com/amireh/happypack#readme">HappyPack 文档</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save-dev happypack</span><br></pre></td></tr></table></figure>

<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title class_">HappyPack</span> = <span class="built_in">require</span>(<span class="string">&#x27;happypack&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">exports</span>.<span class="property">module</span> = &#123;</span><br><span class="line">  <span class="attr">rules</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">test</span>: <span class="regexp">/.js$/</span>,</span><br><span class="line">      <span class="comment">// 1) replace your original list of loaders with &quot;happypack/loader&quot;:</span></span><br><span class="line">      <span class="comment">// loaders: [ &#x27;babel-loader?presets[]=es2015&#x27; ],</span></span><br><span class="line">      <span class="attr">use</span>: <span class="string">&#x27;happypack/loader&#x27;</span>,</span><br><span class="line">      <span class="attr">include</span>: [ <span class="comment">/* ... */</span> ],</span><br><span class="line">      <span class="attr">exclude</span>: [ <span class="comment">/* ... */</span> ]</span><br><span class="line">    &#125;</span><br><span class="line">  ],</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> <span class="title class_">HappyPack</span>(&#123;</span><br><span class="line">      <span class="comment">// 3) re-add the loaders you replaced above in #1:</span></span><br><span class="line">      <span class="attr">loaders</span>: [ <span class="string">&#x27;babel-loader?presets[]=es2015&#x27;</span> ]</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="thread-loader"><a href="#thread-loader" class="headerlink" title="thread-loader"></a>thread-loader</h2><p><a href="https://github.com/webpack-contrib/thread-loader">thread-loader 文档</a></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install --save-dev thread-loader</span><br></pre></td></tr></table></figure>

<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        <span class="attr">include</span>: path.<span class="title function_">resolve</span>(<span class="string">&#x27;src&#x27;</span>),</span><br><span class="line">        <span class="attr">use</span>: [</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="built_in">require</span>.<span class="title function_">resolve</span>(<span class="string">&#x27;babel-loader&#x27;</span>),</span><br><span class="line">            <span class="attr">options</span>: &#123;&#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &#123;</span><br><span class="line">            <span class="attr">loader</span>: <span class="string">&#x27;thread-loader&#x27;</span>,</span><br><span class="line">            <span class="attr">options</span>: &#123;</span><br><span class="line">              <span class="attr">workers</span>: <span class="number">3</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h1 id="缓存已编译过的文件"><a href="#缓存已编译过的文件" class="headerlink" title="缓存已编译过的文件"></a>缓存已编译过的文件</h1><h2 id="webpack4"><a href="#webpack4" class="headerlink" title="webpack4"></a>webpack4</h2><p><a href="https://webpack.docschina.org/loaders/babel-loader#options">cacheDirectory 文档</a></p>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.m?js$/</span>,</span><br><span class="line">        <span class="attr">exclude</span>: <span class="regexp">/(node_modules|bower_components)/</span>,</span><br><span class="line">        <span class="attr">use</span>: &#123;</span><br><span class="line">          <span class="attr">loader</span>: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">          <span class="attr">options</span>: &#123;</span><br><span class="line">            <span class="attr">cacheDirectory</span>: <span class="literal">true</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="webpack5"><a href="#webpack5" class="headerlink" title="webpack5"></a>webpack5</h2><p><a href="https://webpack.docschina.org/configuration/cache/#root">Cache 文档</a></p>
<ul>
<li>开发环境默认开启缓存，生产模式禁用，缓存默认是在内存里。可以对 cache 进行设置</li>
</ul>
<p>文件缓存：</p>
<p>webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = &#123;</span><br><span class="line">  <span class="attr">cache</span>: &#123;</span><br><span class="line">    <span class="attr">type</span>: <span class="string">&#x27;filesystem&#x27;</span>,</span><br><span class="line">    <span class="attr">version</span>: <span class="title function_">createEnvironmentHash</span>(env.<span class="property">raw</span>),</span><br><span class="line">    <span class="attr">cacheDirectory</span>: paths.<span class="property">appWebpackCache</span>,</span><br><span class="line">    <span class="attr">store</span>: <span class="string">&#x27;pack&#x27;</span>,</span><br><span class="line">    <span class="attr">buildDependencies</span>: &#123;</span><br><span class="line">      <span class="attr">defaultWebpack</span>: [<span class="string">&#x27;webpack/lib/&#x27;</span>],</span><br><span class="line">      <span class="attr">config</span>: [__filename],</span><br><span class="line">      <span class="attr">tsconfig</span>: [paths.<span class="property">appTsConfig</span>, paths.<span class="property">appJsConfig</span>].<span class="title function_">filter</span>(<span class="function"><span class="params">f</span> =&gt;</span></span><br><span class="line">        fs.<span class="title function_">existsSync</span>(f)</span><br><span class="line">      ),</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>缓存淘汰策略：文件缓存存储在 node_ modules&#x2F;.cache&#x2F;webpack，最大 500 MB, 缓存时常两个星期，旧的缓存先淘汰</p>
<h1 id="DllPlugin"><a href="#DllPlugin" class="headerlink" title="DllPlugin"></a>DllPlugin</h1><blockquote>
<p>该插件可以将特定的类库提前打包然后引入，这种方式可以极大的减少类库的打包次数，只有当类库有更新版本时才会重新打包，并且也实现了将公共代码抽离成单独文件的优化方案</p>
</blockquote>
]]></content>
      <tags>
        <tag>webpack</tag>
      </tags>
  </entry>
  <entry>
    <title>ios input 设置键盘类型</title>
    <url>/2022/12/25/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%85%BC%E5%AE%B9%E9%97%AE%E9%A2%98%20ios%20input%20%E8%AE%BE%E7%BD%AE%E9%94%AE%E7%9B%98%E7%B1%BB%E5%9E%8B/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">inputmode 全局属性 是一个枚举属性，它提供了用户在编辑元素或其内容时可能输入的数据类型的提示。它可以是以下值：</span><br><span class="line"></span><br><span class="line">&quot;none&quot;</span><br><span class="line"></span><br><span class="line">无虚拟键盘。在应用程序或者站点需要实现自己的键盘输入控件时很有用。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;text&quot;</span><br><span class="line"></span><br><span class="line">使用用户本地区域设置的标准文本输入键盘。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;decimal&quot;</span><br><span class="line"></span><br><span class="line">小数输入键盘，包含数字和分隔符（通常是“ . ”或者“ , ”），设备可能也可能不显示减号键。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;numeric&quot;</span><br><span class="line"></span><br><span class="line">数字输入键盘，所需要的就是0到9的数字，设备可能也可能不显示减号键。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;tel&quot;</span><br><span class="line"></span><br><span class="line">电话输入键盘，包含0到9的数字、星号（*）和井号（#）键。表单输入里面的电话输入通常应该使用 &lt;input type=&quot;tel&quot;&gt; 。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;search&quot;</span><br><span class="line"></span><br><span class="line">为搜索输入优化的虚拟键盘，比如，返回键可能被重新标记为“搜索”，也可能还有其他的优化。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;email&quot;</span><br><span class="line"></span><br><span class="line">为邮件地址输入优化的虚拟键盘，通常包含&quot;@&quot;符号和其他优化。表单里面的邮件地址输入应该使用 &lt;input type=&quot;email&quot;&gt; 。</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&quot;url&quot;</span><br><span class="line"></span><br><span class="line">为网址输入优化的虚拟键盘，比如，“/”键会更加明显、历史记录访问等。表单里面的网址输入通常应该使用 &lt;input type=&quot;url&quot;&gt; 。</span><br><span class="line"></span><br><span class="line">如果没有设置这个属性，它的默认值是 &quot;text&quot;，表明使用本地的标准文本输入键盘。</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>移动端兼容问题</tag>
      </tags>
  </entry>
  <entry>
    <title>将页面改为响应式的组件</title>
    <url>/2023/02/24/%E5%B0%86%E7%BD%91%E9%A1%B5%E6%94%B9%E4%B8%BA%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E7%BB%84%E4%BB%B6/</url>
    <content><![CDATA[<p>快速将页面改为响应式页面</p>
<h1 id="珊格系统"><a href="#珊格系统" class="headerlink" title="珊格系统"></a>珊格系统</h1><p>参考 <a href="https://element-plus.org/zh-CN/component/layout.html">ElementUI Layout 布局</a>、<a href="https://v4.bootcss.com/docs/layout/grid/">Bootstrap 珊格系统</a></p>
<p>将网页划分成若干行，然后每行等分为若干列，基于这样的方式进行布局，形象的成为栅栏布局。</p>
<p>element可将每行划分为24个分栏，而bootstrap是划分为12个分栏，从使用角度，还是24个分栏更加精细。</p>
<table>
<thead>
<tr>
<th align="left">属性</th>
<th align="right">像素</th>
</tr>
</thead>
<tbody><tr>
<td align="left">xs</td>
<td align="right">&lt; 768px</td>
</tr>
<tr>
<td align="left">sm</td>
<td align="right">&gt;&#x3D; 768px</td>
</tr>
<tr>
<td align="left">md</td>
<td align="right">&gt;&#x3D; 992px</td>
</tr>
<tr>
<td align="left">lg</td>
<td align="right">&gt;&#x3D; 1200px</td>
</tr>
<tr>
<td align="left">xl</td>
<td align="right">&gt;&#x3D; 1920px</td>
</tr>
</tbody></table>
<h1 id="全局属性"><a href="#全局属性" class="headerlink" title="全局属性"></a>全局属性</h1><table>
<thead>
<tr>
<th align="left">属性名</th>
<th align="center">说明</th>
<th align="center">类型</th>
<th align="right">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">hidden</td>
<td align="center">隐藏 <code>dispaly: none</code></td>
<td align="center"><code>object</code></td>
<td align="right">{xs: false, sm: false, md: false, lg: false, xl: false}</td>
</tr>
<tr>
<td align="left">order</td>
<td align="center">排列顺序。数值越小，排列越靠前。flex布局的order属性</td>
<td align="center"><code>number</code></td>
<td align="right">0</td>
</tr>
</tbody></table>
<blockquote>
<p>实现方式：<br>vue 通过 <a href="https://cn.vuejs.org/guide/reusability/custom-directives.html#introduction">自定义全局指令</a><br>react</p>
</blockquote>
<h1 id="容器组件"><a href="#容器组件" class="headerlink" title="容器组件"></a>容器组件</h1><p>参考 <code>HTML语义化标签</code> 与 <a href="https://element-plus.org/zh-CN/component/container.html">ElementUI Container 布局容器</a><br>组件，快速搭建页面基本结构</p>
<p><code>an-container</code>: 外层容器。默认水平又左到右排列</p>
<p><code>an-header</code>: 顶栏容器</p>
<p><code>an-aside</code>: 侧边栏容器</p>
<p><code>an-main</code>: 主要区域容器</p>
<p><code>an-footer</code>: 底栏容器</p>
<p><code>an-nav</code>: 导航容器</p>
<blockquote>
<p>tip<br>以上组件采用了 flex 布局，使用前请确定目标浏览器是否兼容。 此外， <code>&lt;an-container&gt;</code> 的直接子元素必须是后五个组件中的一个或多个。<br>后五个组件的父元素必须是一个 <code>&lt;an-container&gt;</code></p>
</blockquote>
<h2 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h2><p><img src="/2023/02/24/%E5%B0%86%E7%BD%91%E9%A1%B5%E6%94%B9%E4%B8%BA%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E7%BB%84%E4%BB%B6/container.png"></p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">an-container</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">an-aside</span>&gt;</span>Aside<span class="tag">&lt;/<span class="name">an-aside</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">an-container</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-header</span>&gt;</span>Header<span class="tag">&lt;/<span class="name">an-header</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-nav</span>&gt;</span>Nav<span class="tag">&lt;/<span class="name">an-nav</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-main</span>&gt;</span>Main<span class="tag">&lt;/<span class="name">an-main</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-footer</span>&gt;</span>Footer<span class="tag">&lt;/<span class="name">an-footer</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">an-container</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">an-container</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h2><p>与<code>ElementUI Container</code> 组件保持保持一致</p>
<h1 id="布局"><a href="#布局" class="headerlink" title="布局"></a>布局</h1><p>通过 <code>an-row</code> 和 <code>an-col</code> 组件，并通过  <code>an-col</code> 组件的 <code>span</code> 属性我们就可以自由地组合布局。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">an-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;24&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">an-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">an-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;12&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">an-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">an-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">an-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">an-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;6&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">an-row</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">an-row</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">an-col</span> <span class="attr">:span</span>=<span class="string">&quot;4&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">an-col</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">an-row</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/02/24/%E5%B0%86%E7%BD%91%E9%A1%B5%E6%94%B9%E4%B8%BA%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E7%BB%84%E4%BB%B6/Layout.png"></p>
<h2 id="属性-1"><a href="#属性-1" class="headerlink" title="属性"></a>属性</h2><p>与<code>ElementUI Layout</code> 组件保持保持一致</p>
]]></content>
  </entry>
  <entry>
    <title>解决移动端键盘遮挡输入框问题</title>
    <url>/2023/01/03/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%94%AE%E7%9B%98%E9%81%AE%E6%8C%A1%E8%BE%93%E5%85%A5%E6%A1%86/</url>
    <content><![CDATA[<h3 id="页面高度小于100vh"><a href="#页面高度小于100vh" class="headerlink" title="页面高度小于100vh"></a>页面高度小于100vh</h3><p>无需处理</p>
<h3 id="页面高度大于等于100vh"><a href="#页面高度大于等于100vh" class="headerlink" title="页面高度大于等于100vh"></a>页面高度大于等于100vh</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">// input onFocus 事件中</span></span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 1、  element.scrollIntoView();</span></span><br><span class="line">  <span class="comment">// 2、  Element.scrollIntoViewIfNeeded()</span></span><br><span class="line">  <span class="comment">// 3、  window.scrollTo(0, document.body.scrollHeight)</span></span><br><span class="line">&#125;, <span class="number">300</span>)</span><br></pre></td></tr></table></figure>

<p>以上方法需要配合css，保证页面不小于100vh</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.page</span> &#123;</span><br><span class="line">    <span class="attribute">min-height</span>: <span class="number">100vh</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>移动端兼容问题</tag>
      </tags>
  </entry>
  <entry>
    <title>Koa 连接 mysql</title>
    <url>/2019/02/22/koa%E8%BF%9E%E6%8E%A5mysql/</url>
    <content><![CDATA[<p>mysql.config.js</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> mysql = <span class="built_in">require</span>(<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 创建 mysql 连接池资源</span></span><br><span class="line"><span class="keyword">var</span> pool = mysql.<span class="title function_">createPool</span>(&#123;</span><br><span class="line">    <span class="attr">host</span>: <span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    <span class="attr">user</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">    <span class="attr">password</span>: <span class="string">&#x27;mima&#x27;</span>,</span><br><span class="line">    <span class="attr">database</span>: <span class="string">&#x27;db&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">module</span>.<span class="property">exports</span> = <span class="keyword">function</span> (<span class="params">sql, value</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        pool.<span class="title function_">getConnection</span>(<span class="keyword">function</span> (<span class="params">err, connection</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) <span class="title function_">reject</span>(<span class="literal">false</span>);</span><br><span class="line">            <span class="keyword">else</span> connection.<span class="title function_">query</span>(sql, value, <span class="function">(<span class="params">error, results, fields</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">//将链接返回到连接池中，准备由其他人重复使用</span></span><br><span class="line">                connection.<span class="title function_">release</span>();</span><br><span class="line">                <span class="keyword">if</span> (error) <span class="title function_">reject</span>(<span class="literal">false</span>);</span><br><span class="line">                <span class="keyword">else</span> <span class="title function_">resolve</span>(results)</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>使用</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">xxx</span> () &#123;</span><br><span class="line">   <span class="keyword">const</span> s = <span class="keyword">await</span> <span class="title function_">query</span>(<span class="string">&quot;sql&quot;</span>, value)</span><br><span class="line">   s ? <span class="string">&#x27;操作成功&#x27;</span>: <span class="string">&#x27;操作失败&#x27;</span></span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>mysql</tag>
        <tag>Koa</tag>
      </tags>
  </entry>
  <entry>
    <title>Ts 常用</title>
    <url>/2023/05/16/ts%20%E5%B8%B8%E7%94%A8/</url>
    <content><![CDATA[<figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">interface</span> a &#123;</span><br><span class="line">  <span class="attr">z</span>: <span class="number">1</span></span><br><span class="line">  <span class="attr">x</span>: <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> b = a</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> c  &#123;</span><br><span class="line">  a,</span><br><span class="line">  b,</span><br><span class="line">  c,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">declare</span> <span class="keyword">namespace</span> API &#123;</span><br><span class="line">  <span class="keyword">type</span> get = &#123;&#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">interface</span> post &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Omit</span>&lt;a, z&gt;</span><br><span class="line"><span class="title class_">Pick</span>&lt;a, x&gt;</span><br><span class="line"></span><br><span class="line"><span class="title class_">Partial</span>&lt;a&gt; <span class="comment">// 可选</span></span><br><span class="line"><span class="title class_">Required</span>&lt;a&gt; <span class="comment">// 必选</span></span><br><span class="line"><span class="title class_">Readonly</span>&lt;a&gt; <span class="comment">// 只读</span></span><br><span class="line"><span class="title class_">Mutable</span>&lt;a&gt; <span class="comment">// 移除只读</span></span><br><span class="line"></span><br><span class="line"><span class="title class_">Exclude</span>&lt;<span class="string">&#x27;key1&#x27;</span> | <span class="string">&#x27;key2&#x27;</span>, <span class="string">&#x27;key2&#x27;</span>&gt; <span class="comment">// &#x27;key1&#x27;</span></span><br><span class="line"><span class="title class_">Extract</span>&lt;<span class="string">&#x27;key1&#x27;</span> | <span class="string">&#x27;key2&#x27;</span>, <span class="string">&#x27;key1&#x27;</span>&gt; <span class="comment">// &#x27;key1&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> a</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> d = keyof a</span><br></pre></td></tr></table></figure>

<h1 id="Record"><a href="#Record" class="headerlink" title="Record"></a>Record</h1><figure class="highlight typescript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">type</span> petsGroup = <span class="string">&#x27;dog&#x27;</span> | <span class="string">&#x27;cat&#x27;</span> | <span class="string">&#x27;fish&#x27;</span>;</span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">IPetInfo</span> &#123;</span><br><span class="line">    <span class="attr">name</span>:<span class="built_in">string</span>,</span><br><span class="line">    <span class="attr">age</span>:<span class="built_in">number</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> <span class="title class_">IPets</span> = <span class="title class_">Record</span>&lt;petsGroup, <span class="title class_">IPetInfo</span>&gt;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="attr">animalsInfo</span>:<span class="title class_">IPets</span> = &#123;</span><br><span class="line">    <span class="attr">dog</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;dogName&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">cat</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;catName&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">fish</span>:&#123;</span><br><span class="line">        <span class="attr">name</span>:<span class="string">&#x27;fishName&#x27;</span>,</span><br><span class="line">        <span class="attr">age</span>:<span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>ts</tag>
      </tags>
  </entry>
  <entry>
    <title>sketch 导出与导入json文件</title>
    <url>/2023/05/25/sketch%20%E5%AF%BC%E5%87%BA%E4%B8%8E%E5%AF%BC%E5%85%A5json%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<h3 id="sketch-元素-转-json"><a href="#sketch-元素-转-json" class="headerlink" title="sketch 元素 转 json"></a>sketch 元素 转 json</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; toSJSON &#125; <span class="keyword">from</span> <span class="string">&#x27;sketch-json-helper&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> fs <span class="keyword">from</span> <span class="string">&quot;@skpm/fs&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sketch = <span class="built_in">require</span>(<span class="string">&#x27;sketch&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 导出json文件</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> <span class="title function_">exportJson</span> = (<span class="params">context</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="variable language_">document</span> = sketch.<span class="title function_">fromNative</span>(context.<span class="property">document</span>);<span class="comment">//声明</span></span><br><span class="line">  <span class="keyword">const</span> selectedLayers = <span class="variable language_">document</span>.<span class="property">selectedLayers</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> arr = selectedLayers.<span class="property">layers</span>;</span><br><span class="line">  <span class="keyword">const</span> format = <span class="string">&#x27;json&#x27;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (arr.<span class="property">length</span> === <span class="number">0</span>) sketch.<span class="property">UI</span>.<span class="title function_">message</span>(<span class="string">&quot;请选择要导出的组件!&quot;</span>);</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (arr.<span class="property">length</span> &gt; <span class="number">1</span>) sketch.<span class="property">UI</span>.<span class="title function_">alert</span>(<span class="string">&#x27;提示&#x27;</span>, <span class="string">&#x27;只支持单选&#x27;</span>)</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    arr.<span class="title function_">forEach</span>(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> savePanel = <span class="title class_">NSSavePanel</span>.<span class="title function_">savePanel</span>();</span><br><span class="line">      savePanel.<span class="title function_">setTitle</span>(<span class="string">&#x27;Save File&#x27;</span>);</span><br><span class="line">      savePanel.<span class="title function_">setNameFieldStringValue</span>(item.<span class="property">name</span>)</span><br><span class="line">      savePanel.<span class="title function_">setDirectoryURL</span>(<span class="variable language_">document</span>.<span class="property">sketchObject</span>.<span class="title function_">fileURL</span>())</span><br><span class="line">      savePanel.<span class="title function_">setAllowedFileTypes</span>([format]);</span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (savePanel.<span class="title function_">runModal</span>() === <span class="title class_">NSModalResponseOK</span>) &#123;</span><br><span class="line">        <span class="keyword">const</span> url = savePanel.<span class="title function_">URL</span>().<span class="title class_">URLByDeletingLastPathComponent</span>().<span class="title function_">path</span>();</span><br><span class="line">        <span class="keyword">const</span> customFileName = savePanel.<span class="title function_">nameFieldStringValue</span>()</span><br><span class="line"></span><br><span class="line">        fs.<span class="title function_">writeFileSync</span>(<span class="string">`<span class="subst">$&#123;url&#125;</span>/<span class="subst">$&#123;customFileName&#125;</span>.<span class="subst">$&#123;format&#125;</span>`</span>, <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(<span class="title function_">toSJSON</span>(item)));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    sketch.<span class="property">UI</span>.<span class="title function_">message</span>(<span class="string">`导出结束`</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="sketch-json-转-元素"><a href="#sketch-json-转-元素" class="headerlink" title="sketch json 转 元素"></a>sketch json 转 元素</h3><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;fromNative&#125; <span class="keyword">from</span> <span class="string">&#x27;sketch/dom&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123;toSJSON&#125; <span class="keyword">from</span> <span class="string">&#x27;sketch-json-helper&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> nativeLayer = <span class="title function_">fromSJSON</span>(json);</span><br><span class="line"><span class="keyword">const</span> sketchObj = <span class="title function_">fromNative</span>(nativeLayer);</span><br><span class="line"><span class="title function_">adjustFrame</span>(sketchObj);</span><br><span class="line"><span class="title class_">Document</span>.<span class="title function_">getSelectedDocument</span>().<span class="property">selectedPage</span>.<span class="property">layers</span>.<span class="title function_">push</span>(sketchObj);</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>js</tag>
        <tag>sketch</tag>
      </tags>
  </entry>
  <entry>
    <title>处理 windows 系统 yarn 提示 无法加载文件 D:\nodejs\yarn.ps1,因为在此系统上禁止运行脚本</title>
    <url>/2023/06/06/yarn%E5%9B%A0%E4%B8%BA%E5%9C%A8%E6%AD%A4%E7%B3%BB%E7%BB%9F%E4%B8%8A%E7%A6%81%E6%AD%A2%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC/</url>
    <content><![CDATA[<h3 id="错误提示"><a href="#错误提示" class="headerlink" title="错误提示"></a>错误提示</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn : 无法加载文件 D:\nodejs\yarn.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:/go.microsoft.com/fwlink/?LinkID=135170 中的 about_ </span><br><span class="line">Execution_Policies。</span><br><span class="line">所在位置 行:1 字符: 1</span><br></pre></td></tr></table></figure>
<br/>

<h3 id="解决问题"><a href="#解决问题" class="headerlink" title="解决问题"></a>解决问题</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">get-ExecutionPolicy</span><br><span class="line"></span><br><span class="line">// CurrentUser</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set-ExecutionPolicy -Scope CurrentUser</span><br><span class="line">位于命令管道位置 1 的 cmdlet Set-ExecutionPolicy</span><br><span class="line">请为以下参数提供值:</span><br><span class="line">ExecutionPolicy: // 这里输入 “RemoteSigned”</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">get-ExecutionPolicy</span><br></pre></td></tr></table></figure>

<br/>

<h4 id="解决完成，安装依赖"><a href="#解决完成，安装依赖" class="headerlink" title="解决完成，安装依赖"></a>解决完成，安装依赖</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">yarn</span><br></pre></td></tr></table></figure>]]></content>
      <tags>
        <tag>yarn</tag>
      </tags>
  </entry>
  <entry>
    <title>homebrew切换源</title>
    <url>/2023/07/05/homebrew%E5%88%87%E6%8D%A2%E6%BA%90/</url>
    <content><![CDATA[<p>清华</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">export HOMEBREW_BREW_GIT_REMOTE=&quot;https://mirrors.tuna.tsinghua.edu.cn/git/homebrew/brew.git&quot;</span><br><span class="line">brew update</span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>homebrew</tag>
      </tags>
  </entry>
  <entry>
    <title>git 代理</title>
    <url>/2023/07/10/git%20%E4%BB%A3%E7%90%86/</url>
    <content><![CDATA[<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><ol>
<li>打开翻墙软件，查看 http 代理服务器。例如 Shadowsocks.app为：127.0.0.1:1087</li>
<li>设置 git 全局代理：<code>git config --global http.proxy SOCKS://127.0.0.1:1087</code></li>
</ol>
<h1 id="还原"><a href="#还原" class="headerlink" title="还原"></a>还原</h1><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 方式一</span><br><span class="line">git config --global --unset http.proxy</span><br><span class="line"></span><br><span class="line"># 方式二</span><br><span class="line">git config --global --unset http.https://github.com.proxy</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>git</tag>
      </tags>
  </entry>
  <entry>
    <title>node 获取命令行参数</title>
    <url>/2023/07/11/node%20%E8%8E%B7%E5%8F%96%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0/</url>
    <content><![CDATA[<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node index.js --name=abc</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getArguments</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> &#123;length&#125; = process.<span class="property">argv</span></span><br><span class="line">  <span class="keyword">const</span> args = &#123;&#125;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">2</span>; i &lt; length; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> [key, val] = process.<span class="property">argv</span>[i].<span class="title function_">split</span>(<span class="string">&#x27;=&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (key &amp;&amp; val) args[key] = val</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> args</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ags = <span class="title function_">getArguments</span>() <span class="comment">// ags = &#123;&#x27;---name&#x27;: &#x27;abc&#125;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <tags>
        <tag>node</tag>
      </tags>
  </entry>
</search>
